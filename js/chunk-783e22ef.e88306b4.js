(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-783e22ef"],{"29fb":function(t,a,s){"use strict";s("db8e")},"4d2d":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t._self._c;return a("div",{staticClass:"sdk-to-direct-pay"},[t._m(0),a("div",{staticClass:"page-layout"},[a("div",{staticClass:"input-panel"},[t._m(1),a("div",{staticClass:"panel-body"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.sdkParams,expression:"sdkParams"}],attrs:{placeholder:"在此处粘贴完整的SDK支付参数字符串...",disabled:t.isLoading},domProps:{value:t.sdkParams},on:{input:function(a){a.target.composing||(t.sdkParams=a.target.value)}}}),a("div",{staticClass:"action-row"},[a("button",{staticClass:"sample-btn",attrs:{disabled:t.isLoading},on:{click:t.fillSampleData}},[a("i",{staticClass:"fas fa-flask"}),t._v(" 填充测试数据 ")]),a("button",{staticClass:"action-btn",attrs:{disabled:!t.sdkParams||t.isLoading},on:{click:t.convertToDirectPay}},[t.isLoading?a("span",[a("i",{staticClass:"fas fa-spinner fa-spin"}),t._v(" 转换中... ")]):a("span",[a("i",{staticClass:"fas fa-exchange-alt"}),t._v(" 立即转换 ")])])])])]),a("div",{staticClass:"result-panel"},[t._m(2),a("div",{staticClass:"panel-body"},[a("transition",{attrs:{name:"fade"}},[t.error?a("div",{staticClass:"state-container error-state"},[a("i",{staticClass:"fas fa-exclamation-circle"}),a("p",[t._v(t._s(t.error))])]):t._e()]),a("transition",{attrs:{name:"fade"}},[t.isLoading&&!t.paymentUrl?a("div",{staticClass:"state-container loading-state"},[a("div",{staticClass:"spinner"}),a("p",[t._v("正在努力转换中，请稍候...")])]):t._e()]),a("transition",{attrs:{name:"fade"}},[t.paymentUrl?a("div",{staticClass:"payment-result"},[a("div",{staticClass:"result-header"},[a("div",{staticClass:"status-badge success"},[a("i",{staticClass:"fas fa-check"}),a("span",[t._v("转换成功")])]),a("div",{staticClass:"timer-badge"},[a("i",{staticClass:"fas fa-hourglass-half"}),a("span",[t._v(t._s(t.formattedCountdown))])])]),a("div",{staticClass:"qr-section"},[a("div",{staticClass:"qr-wrapper"},[t.qrCodeDataUrl?a("img",{attrs:{src:t.qrCodeDataUrl,alt:"支付二维码"}}):a("div",{staticClass:"qr-placeholder"},[a("div",{staticClass:"spinner"})])]),a("p",{staticClass:"qr-tip"},[t._v("请使用支付宝扫码完成支付")])]),a("div",{staticClass:"link-section"},[a("h4",[t._v("支付链接")]),a("div",{staticClass:"input-group"},[a("input",{ref:"paymentLinkInput",attrs:{type:"text",readonly:""},domProps:{value:t.paymentUrl}}),a("button",{staticClass:"copy-btn",attrs:{title:"复制链接"},on:{click:t.copyLink}},[a("i",{class:t.copySuccess?"fas fa-check":"fas fa-copy"})])]),a("p",{staticClass:"link-tip"},[t._v("链接有效期 5 分钟，请尽快使用")])])]):t._e()]),t.paymentUrl||t.isLoading||t.error?t._e():a("div",{staticClass:"empty-state"},[a("i",{staticClass:"fas fa-arrow-left"}),a("p",[t._v("请在左侧输入SDK参数并点击转换")])])],1)])])])},i=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"page-header"},[a("h1",{staticClass:"page-title"},[t._v("SDK 转直付 (支付宝)")]),a("p",{staticClass:"page-subtitle"},[t._v("将应用内支付参数转换为可直接访问的支付宝支付页面")])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"panel-header"},[a("i",{staticClass:"fas fa-keyboard"}),a("h2",[t._v("参数输入")])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"panel-header"},[a("i",{staticClass:"fas fa-qrcode"}),a("h2",[t._v("支付信息")])])}],r=s("d055"),n=s.n(r),o={name:"SdkToDirectPay",data(){return{sdkParams:"",paymentUrl:"",qrCodeDataUrl:"",error:"",isLoading:!1,countdown:300,timer:null,copySuccess:!1,sampleData:"alipay_sdk=alipay-sdk-java-3.7.69.ALL&app_id=2019041563856886&biz_content=%7B%22body%22%3A%22%E4%BA%A4%E9%80%9A%E8%81%94%E5%90%88%E8%AE%A2%E5%8D%95%22%2C%22out_trade_no%22%3A%2225062102485543737841%22%2C%22product_code%22%3A%22QUICK_MSECURITY_PAY%22%2C%22subject%22%3A%22%E4%BA%A4%E9%80%9A%E8%81%94%E5%90%88%22%2C%22timeout_express%22%3A%2215d%22%2C%22total_amount%22%3A%2250.0%22%7D&charset=UTF-8&format=json&method=alipay.trade.app.pay&notify_url=https%3A%2F%2Fpay.t-union.com%3A16042%2Ftmtps%2Fpayment%2FaliPayResultNotice&sign_type=RSA2&timestamp=2025-06-21+02%3A48%3A55&version=1.0&sign=mGNooifsQ9SulWU65%2BDdVdJYB5R50%2BW1jYPBYDBUrC1Z8s4mtqxukrWsjNxLQs6GxL%2FiBcvhVyi8FTZxAj251T8PbeoNtm4gcgeb6DjszMGyjOADDU5zzwcZFAqdeJwYF%2Fe49e%2FrPv8Z%2FxP1nFRlUp%2B9ldtcrDR4AGxGPcBm4rnTX3QZFwnODbm4m9z3MDGYm4tp1Tva0kL7V%2FJGU891NmB4N0B8z%2FBHaOeW%2BpHUODwXfSO6HamUoVTAuEbybkRFPBEAFUmDMpptRP7%2FD553vY9orswFetQ5qb8xZk8W1rnqL2x1Pgn3CzRB5YikkRQiTRWS6d5Qb2hCwsegSzKvIQ%3D%3D"}},computed:{formattedCountdown(){const t=Math.floor(this.countdown/60),a=this.countdown%60;return`${t.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`}},methods:{fillSampleData(){this.sdkParams=this.sampleData},async convertToDirectPay(){if(this.resetState(),this.sdkParams){this.isLoading=!0;try{const t=await this.$api.post("/api/create-payment",this.sdkParams,{headers:{"Content-Type":"text/plain"}});t.data&&t.data.paymentUrl?(this.paymentUrl=t.data.paymentUrl,this.generateQrCode(),this.startTimer()):this.error=t.data.message||"未能获取支付链接，请检查参数格式。"}catch(s){var t,a;this.error=(null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"转换失败，请检查参数或联系管理员。",console.error(s)}finally{this.isLoading=!1}}else this.error="请输入SDK参数"},async generateQrCode(){if(this.paymentUrl)try{this.qrCodeDataUrl=await n.a.toDataURL(this.paymentUrl,{width:200,margin:1,errorCorrectionLevel:"H"})}catch(t){console.error("QR code generation failed",t),this.error="二维码生成失败。"}},startTimer(){this.countdown=300,this.timer=setInterval(()=>{this.countdown>0?this.countdown--:(this.resetState(),this.error="支付链接已过期，请重新生成。")},1e3)},resetState(){this.paymentUrl="",this.qrCodeDataUrl="",this.error="",this.copySuccess=!1,this.timer&&(clearInterval(this.timer),this.timer=null)},copyLink(){this.paymentUrl&&(this.$refs.paymentLinkInput.select(),document.execCommand("copy"),this.copySuccess=!0,setTimeout(()=>{this.copySuccess=!1},2e3))}},beforeDestroy(){this.timer&&clearInterval(this.timer)}},c=o,l=(s("29fb"),s("2877")),d=Object(l["a"])(c,e,i,!1,null,"129b7362",null);a["default"]=d.exports},db8e:function(t,a,s){}}]);
//# sourceMappingURL=chunk-783e22ef.e88306b4.js.map