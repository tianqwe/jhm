{"version":3,"sources":["webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/App.vue?03b3","webpack:///./src/App.vue?315a","webpack:///./src/App.vue?4c70"],"names":["render","_vm","this","_c","_self","attrs","staticClass","_l","notifications","notification","key","id","on","$event","handleNotificationClick","_v","_s","displayId","message","stopPropagation","removeNotification","$route","meta","layout","isLoggedIn","isMobile","sidebarActive","toggleSidebar","class","_e","_m","currentUser","userRoleText","handleLogout","closeSidebarOnMobile","active","filteredMenuItems","item","name","path","startsWith","children","length","nativeOn","preventDefault","handleMenuClick","icon","text","badge","expanded","child","apply","arguments","showChatWidget","chatPanelOpen","toggleChatPanel","unreadCount","directives","rawName","value","expression","activeOrders","refreshOrders","order","_vm$selectedOrder","orderId","selectedOrder","selectOrder","slice","formatAmount","amount","formatTime","createdAt","ref","messages","_id","sender","content","newMessage","domProps","type","indexOf","_k","keyCode","sendMessage","target","composing","trim","staticRenderFns","components","GlobalMessageListener","data","menuItems","roles","currentUserId","userRole","localStorage","getItem","messageSubscriptions","Set","currentOrderId","notificationAudio","activeNotifications","chatMessages","Map","processedMessageIds","notificationSound","computed","filter","includes","role","methods","event","$router","push","wasExpanded","forEach","i","handleLoginStateChange","loggedIn","$nextTick","initializeLoginState","removeItem","$socket","off","disconnect","EventBus","$emit","replace","document","body","classList","add","setTimeout","remove","handleResize","wasNotMobile","window","innerWidth","loadActiveOrders","response","$api","get","params","status","limit","orders","error","console","has","set","msg","index","findIndex","o","$set","initOrderSocket","$message","handleNewMessage","isDuplicate","some","m","Math","abs","Date","scrollToBottom","messageContent","userId","post","handleNewOrderMessage","container","$refs","messagesContainer","scrollTop","scrollHeight","parseFloat","toFixed","time","toLocaleTimeString","hour","minute","formatDate","toLocaleDateString","setupWebSocket","connect","isOrderOwner","orderUserId","isSuperAdmin","addNotification","showBrowserNotification","emit","closeChatWidget","map","setupOrderMessageListeners","playNotificationSound","orderIndex","now","timestamp","currentTime","play","catch","warn","Notification","permission","tag","requireInteraction","onclick","focus","close","fetchActiveOrders","initializeSocket","Audio","load","setupOrderListener","showNotification","silent","query","openChat","requestPermission","then","unshift","pop","n","splice","requestNotificationPermission","_this$selectedOrder","sort","a","b","handleGlobalMessage","isOwner","showGlobalNotification","removeGlobalNotification","handleGlobalNotificationClick","updateCurrentUser","username","connected","cleanupSocket","removeAllListeners","initNotificationSound","created","$on","mounted","addEventListener","beforeDestroy","removeEventListener","$off","watch","handler","immediate","component"],"mappings":"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","file":"js/app~d0ae3f07.ac4af671.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"global-notifications\"},[_c('transition-group',{attrs:{\"name\":\"notification\"}},_vm._l((_vm.notifications),function(notification){return _c('div',{key:notification.id,staticClass:\"notification-item\",on:{\"click\":function($event){return _vm.handleNotificationClick(notification)}}},[_c('div',{staticClass:\"notification-content\"},[_c('i',{staticClass:\"fas fa-comment\"}),_c('div',{staticClass:\"notification-text\"},[_c('div',{staticClass:\"notification-title\"},[_vm._v(\"新消息提醒\")]),_c('div',{staticClass:\"notification-message\"},[_vm._v(\" 订单 \"+_vm._s(notification.displayId)+\": \"+_vm._s(notification.message)+\" \")])]),_c('button',{staticClass:\"close-btn\",on:{\"click\":function($event){$event.stopPropagation();return _vm.removeNotification(notification.id)}}},[_c('i',{staticClass:\"fas fa-times\"})])])])}),0)],1),(_vm.$route.meta.layout !== 'blank' && _vm.isLoggedIn)?[_c('header',{staticClass:\"header\"},[_c('div',{staticClass:\"header-container\"},[_c('div',{staticClass:\"header-left\"},[(_vm.isMobile || !_vm.sidebarActive)?_c('button',{staticClass:\"menu-toggle\",on:{\"click\":_vm.toggleSidebar}},[_c('div',{staticClass:\"hamburger-icon\",class:{ 'active': _vm.sidebarActive }},[_c('span',{staticClass:\"line line-1\"}),_c('span',{staticClass:\"line line-2\"}),_c('span',{staticClass:\"line line-3\"})])]):_vm._e(),_vm._m(0)]),_c('div',{staticClass:\"header-right\"},[(!_vm.isMobile)?_c('div',{staticClass:\"user-info\"},[_vm._m(1),_c('div',{staticClass:\"user-details\"},[_c('span',{staticClass:\"username\"},[_vm._v(_vm._s(_vm.currentUser))]),_c('span',{staticClass:\"role\"},[_vm._v(_vm._s(_vm.userRoleText))])]),_vm._m(2),_c('div',{staticClass:\"user-dropdown\"},[_c('div',{staticClass:\"dropdown-item\",on:{\"click\":_vm.handleLogout}},[_c('i',{staticClass:\"fas fa-sign-out-alt\"}),_c('span',[_vm._v(\"退出登录\")])])])]):_vm._e()])])]),_c('div',{staticClass:\"container\",class:{ 'sidebar-collapsed': !_vm.sidebarActive }},[(_vm.isMobile && _vm.sidebarActive)?_c('div',{staticClass:\"overlay\",on:{\"click\":_vm.closeSidebarOnMobile}}):_vm._e(),_c('nav',{staticClass:\"sidebar\",class:{ active: _vm.sidebarActive }},[_c('div',{staticClass:\"sidebar-content\"},[_c('ul',{staticClass:\"nav-menu\"},[_vm._l((_vm.filteredMenuItems),function(item){return _c('li',{key:item.name,staticClass:\"nav-item\",class:{ \n                  'active': _vm.$route.path === item.path || _vm.$route.path.startsWith(item.path + '/'),\n                  'has-children': item.children && item.children.length > 0\n                }},[_c('router-link',{staticClass:\"nav-link\",class:{'has-arrow': item.children && item.children.length > 0},attrs:{\"to\":!item.children || item.children.length === 0 ? item.path : ''},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.handleMenuClick(item, $event)}}},[_c('div',{staticClass:\"nav-icon\"},[_c('i',{class:item.icon})]),_c('div',{staticClass:\"nav-content\"},[(_vm.sidebarActive || _vm.isMobile)?_c('span',{staticClass:\"nav-text\"},[_vm._v(_vm._s(item.text))]):_vm._e(),(item.badge && (_vm.sidebarActive || _vm.isMobile))?_c('span',{staticClass:\"nav-badge\"},[_vm._v(_vm._s(item.badge))]):_vm._e()]),(item.children && item.children.length > 0 && _vm.sidebarActive)?_c('div',{staticClass:\"submenu-arrow\",class:{'expanded': item.expanded}},[_c('i',{staticClass:\"fas fa-chevron-right\"})]):_vm._e()]),_c('transition',{attrs:{\"name\":\"submenu\"}},[(item.children && item.children.length > 0 && item.expanded)?_c('ul',{staticClass:\"submenu\"},_vm._l((item.children),function(child){return _c('li',{key:child.name,staticClass:\"submenu-item\",class:{ 'active': _vm.$route.path === child.path }},[_c('router-link',{staticClass:\"submenu-link\",attrs:{\"to\":child.path},nativeOn:{\"click\":function($event){return _vm.closeSidebarOnMobile.apply(null, arguments)}}},[_c('i',{class:child.icon}),_c('span',[_vm._v(_vm._s(child.text))])])],1)}),0):_vm._e()])],1)}),(_vm.isMobile)?_c('li',{staticClass:\"nav-item\",on:{\"click\":_vm.handleLogout}},[_c('a',{staticClass:\"nav-link\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();}}},[_vm._m(3),_vm._m(4)])]):_vm._e()],2)]),_c('div',{staticClass:\"sidebar-footer\"},[(!_vm.isMobile)?_c('button',{staticClass:\"collapse-btn\",attrs:{\"title\":_vm.sidebarActive ? '收起菜单' : '展开菜单'},on:{\"click\":_vm.toggleSidebar}},[_c('i',{class:_vm.sidebarActive ? 'fas fa-chevron-left' : 'fas fa-chevron-right'})]):_vm._e()])]),_c('main',{staticClass:\"main-content\"},[_c('div',{staticClass:\"content-wrapper\"},[_c('router-view')],1)]),(_vm.showChatWidget)?_c('div',{staticClass:\"chat-widget\"},[_c('div',{staticClass:\"chat-trigger\",class:{ 'active': _vm.chatPanelOpen },on:{\"click\":_vm.toggleChatPanel}},[_c('div',{staticClass:\"trigger-content\"},[_c('div',{staticClass:\"trigger-icon\"},[_c('i',{staticClass:\"fas fa-headset\"}),(_vm.unreadCount > 0)?_c('span',{staticClass:\"unread-badge\"},[_vm._v(_vm._s(_vm.unreadCount))]):_vm._e()]),_c('span',{staticClass:\"trigger-text\"},[_vm._v(\"在线客服\")])])]),_c('transition',{attrs:{\"name\":\"slide-up\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.chatPanelOpen),expression:\"chatPanelOpen\"}],staticClass:\"chat-panel\"},[_c('div',{staticClass:\"panel-header\"},[_c('div',{staticClass:\"header-info\"},[_c('i',{staticClass:\"fas fa-comments\"}),_c('div',{staticClass:\"header-text\"},[_c('h3',[_vm._v(\"客户消息\")]),_c('span',{staticClass:\"header-subtitle\"},[_vm._v(_vm._s(_vm.activeOrders.length)+\"个待处理订单\")])])]),_c('div',{staticClass:\"header-actions\"},[_c('button',{staticClass:\"action-btn\",attrs:{\"title\":\"刷新\"},on:{\"click\":_vm.refreshOrders}},[_c('i',{staticClass:\"fas fa-sync-alt\"})]),_c('button',{staticClass:\"action-btn\",attrs:{\"title\":\"最小化\"},on:{\"click\":_vm.toggleChatPanel}},[_c('i',{staticClass:\"fas fa-minus\"})])])]),_c('div',{staticClass:\"panel-content\"},[_c('div',{staticClass:\"orders-list custom-scrollbar\"},_vm._l((_vm.activeOrders),function(order){return _c('div',{key:order.orderId,staticClass:\"order-card\",class:{ \n                    'active': _vm.selectedOrder?.orderId === order.orderId,\n                    'has-unread': order.unreadCount > 0 \n                  },on:{\"click\":function($event){return _vm.selectOrder(order)}}},[_c('div',{staticClass:\"order-main\"},[_c('div',{staticClass:\"order-header\"},[_c('span',{staticClass:\"order-id\"},[_vm._v(\"#\"+_vm._s(order.orderId.slice(-8)))]),_c('span',{staticClass:\"order-amount\"},[_vm._v(\"¥\"+_vm._s(_vm.formatAmount(order.amount)))])]),_c('div',{staticClass:\"order-footer\"},[_c('span',{staticClass:\"order-time\"},[_c('i',{staticClass:\"far fa-clock\"}),_vm._v(\" \"+_vm._s(_vm.formatTime(order.createdAt))+\" \")]),(order.unreadCount)?_c('span',{staticClass:\"unread-count\"},[_vm._v(_vm._s(order.unreadCount)+\"条新消息\")]):_vm._e()])])])}),0),(_vm.selectedOrder)?_c('div',{staticClass:\"chat-area\"},[_c('div',{ref:\"messagesContainer\",staticClass:\"chat-messages custom-scrollbar\"},_vm._l((_vm.messages),function(message){return _c('div',{key:message._id,staticClass:\"message\",class:message.sender === 'merchant' ? 'sent' : 'received'},[_c('div',{staticClass:\"message-bubble\"},[_c('div',{staticClass:\"message-content\"},[_vm._v(_vm._s(message.content))]),_c('div',{staticClass:\"message-time\"},[_vm._v(_vm._s(_vm.formatTime(message.createdAt)))])])])}),0),_c('div',{staticClass:\"chat-composer\"},[_c('div',{staticClass:\"composer-tools\"},[_c('button',{staticClass:\"tool-btn\",attrs:{\"title\":\"表情\"}},[_c('i',{staticClass:\"far fa-smile\"})]),_c('button',{staticClass:\"tool-btn\",attrs:{\"title\":\"图片\"}},[_c('i',{staticClass:\"far fa-image\"})])]),_c('div',{staticClass:\"composer-input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newMessage),expression:\"newMessage\"}],attrs:{\"placeholder\":\"输入消息...\"},domProps:{\"value\":(_vm.newMessage)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.sendMessage.apply(null, arguments)},\"input\":function($event){if($event.target.composing)return;_vm.newMessage=$event.target.value}}}),_c('button',{staticClass:\"send-btn\",attrs:{\"disabled\":!_vm.newMessage.trim()},on:{\"click\":_vm.sendMessage}},[_c('i',{staticClass:\"fas fa-paper-plane\"})])])])]):_c('div',{staticClass:\"empty-state\"},[_c('div',{staticClass:\"empty-icon\"},[_c('i',{staticClass:\"fas fa-comments\"})]),_c('h3',[_vm._v(\"选择订单开始对话\")]),_c('p',[_vm._v(\"点击左侧订单列表开始沟通\")])])])])])],1):_vm._e()])]:_c('router-view'),(_vm.isLoggedIn)?_c('GlobalMessageListener'):_vm._e()],2)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"site-title\"},[_c('div',{staticClass:\"site-logo\"},[_c('i',{staticClass:\"fas fa-random\"})]),_c('h1',{staticClass:\"site-text\"},[_vm._v(\"通道市场管理系统\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"avatar\"},[_c('i',{staticClass:\"fas fa-user\"})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"dropdown-icon\"},[_c('i',{staticClass:\"fas fa-chevron-down\"})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"nav-icon\"},[_c('i',{staticClass:\"fas fa-sign-out-alt\"})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"nav-content\"},[_c('span',{staticClass:\"nav-text\"},[_vm._v(\"退出登录\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"app\">\n    <div class=\"global-notifications\">\n      <transition-group name=\"notification\">\n        <div \n          v-for=\"notification in notifications\" \n          :key=\"notification.id\"\n          class=\"notification-item\"\n          @click=\"handleNotificationClick(notification)\"\n        >\n          <div class=\"notification-content\">\n            <i class=\"fas fa-comment\"></i>\n            <div class=\"notification-text\">\n              <div class=\"notification-title\">新消息提醒</div>\n              <div class=\"notification-message\">\n                订单 {{ notification.displayId }}: {{ notification.message }}\n              </div>\n            </div>\n            <button \n              class=\"close-btn\"\n              @click.stop=\"removeNotification(notification.id)\"\n            >\n              <i class=\"fas fa-times\"></i>\n            </button>\n          </div>\n        </div>\n      </transition-group>\n    </div>\n\n    <template v-if=\"$route.meta.layout !== 'blank' && isLoggedIn\">\n      <header class=\"header\">\n        <div class=\"header-container\">\n          <div class=\"header-left\">\n            <button class=\"menu-toggle\" @click=\"toggleSidebar\" v-if=\"isMobile || !sidebarActive\">\n              <div class=\"hamburger-icon\" :class=\"{ 'active': sidebarActive }\">\n                <span class=\"line line-1\"></span>\n                <span class=\"line line-2\"></span>\n                <span class=\"line line-3\"></span>\n              </div>\n            </button>\n            <div class=\"site-title\">\n              <div class=\"site-logo\">\n                <i class=\"fas fa-random\"></i>\n              </div>\n              <h1 class=\"site-text\">通道市场管理系统</h1>\n            </div>\n          </div>\n          \n          <div class=\"header-right\">\n            <div class=\"user-info\" v-if=\"!isMobile\">\n              <div class=\"avatar\">\n                <i class=\"fas fa-user\"></i>\n              </div>\n              <div class=\"user-details\">\n                <span class=\"username\">{{ currentUser }}</span>\n                <span class=\"role\">{{ userRoleText }}</span>\n              </div>\n              <div class=\"dropdown-icon\">\n                <i class=\"fas fa-chevron-down\"></i>\n              </div>\n              <div class=\"user-dropdown\">\n                <div class=\"dropdown-item\" @click=\"handleLogout\">\n                  <i class=\"fas fa-sign-out-alt\"></i>\n                  <span>退出登录</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <div class=\"container\" :class=\"{ 'sidebar-collapsed': !sidebarActive }\">\n        <div \n          v-if=\"isMobile && sidebarActive\"\n          class=\"overlay\" \n          @click=\"closeSidebarOnMobile\"\n        ></div>\n        \n        <nav class=\"sidebar\" :class=\"{ active: sidebarActive }\">\n          <div class=\"sidebar-content\">\n            <ul class=\"nav-menu\">\n              <li v-for=\"item in filteredMenuItems\" :key=\"item.name\" \n                  class=\"nav-item\" \n                  :class=\"{ \n                    'active': $route.path === item.path || $route.path.startsWith(item.path + '/'),\n                    'has-children': item.children && item.children.length > 0\n                  }\">\n                <router-link \n                  :to=\"!item.children || item.children.length === 0 ? item.path : ''\"\n                  @click.native.prevent=\"handleMenuClick(item, $event)\"\n                  class=\"nav-link\"\n                  :class=\"{'has-arrow': item.children && item.children.length > 0}\"\n                >\n                  <div class=\"nav-icon\">\n                    <i :class=\"item.icon\"></i>\n                  </div>\n                  <div class=\"nav-content\">\n                    <span v-if=\"sidebarActive || isMobile\" class=\"nav-text\">{{ item.text }}</span>\n                    <span v-if=\"item.badge && (sidebarActive || isMobile)\" class=\"nav-badge\">{{ item.badge }}</span>\n                  </div>\n                  <div v-if=\"item.children && item.children.length > 0 && sidebarActive\" \n                       class=\"submenu-arrow\"\n                       :class=\"{'expanded': item.expanded}\">\n                    <i class=\"fas fa-chevron-right\"></i>\n                  </div>\n                </router-link>\n                \n                <!-- 子菜单 -->\n                <transition name=\"submenu\">\n                  <ul v-if=\"item.children && item.children.length > 0 && item.expanded\" class=\"submenu\">\n                    <li v-for=\"child in item.children\" :key=\"child.name\" class=\"submenu-item\"\n                        :class=\"{ 'active': $route.path === child.path }\">\n                      <router-link :to=\"child.path\" @click.native=\"closeSidebarOnMobile\" class=\"submenu-link\">\n                        <i :class=\"child.icon\"></i>\n                        <span>{{ child.text }}</span>\n                      </router-link>\n                    </li>\n                  </ul>\n                </transition>\n              </li>\n              <li v-if=\"isMobile\" class=\"nav-item\" @click=\"handleLogout\">\n                <a href=\"#\" @click.prevent class=\"nav-link\">\n                  <div class=\"nav-icon\">\n                    <i class=\"fas fa-sign-out-alt\"></i>\n                  </div>\n                  <div class=\"nav-content\">\n                    <span class=\"nav-text\">退出登录</span>\n                  </div>\n                </a>\n              </li>\n            </ul>\n          </div>\n          \n          <div class=\"sidebar-footer\">\n            <button \n              v-if=\"!isMobile\" \n              class=\"collapse-btn\" \n              @click=\"toggleSidebar\" \n              :title=\"sidebarActive ? '收起菜单' : '展开菜单'\"\n            >\n              <i :class=\"sidebarActive ? 'fas fa-chevron-left' : 'fas fa-chevron-right'\"></i>\n            </button>\n          </div>\n        </nav>\n        \n        <main class=\"main-content\">\n          <div class=\"content-wrapper\">\n            <router-view></router-view>\n          </div>\n        </main>\n\n        <!-- 添加聊天组件 -->\n        <div class=\"chat-widget\" v-if=\"showChatWidget\">\n          <!-- 悬浮触发按钮 -->\n          <div \n            class=\"chat-trigger\" \n            @click=\"toggleChatPanel\"\n            :class=\"{ 'active': chatPanelOpen }\"\n          >\n            <div class=\"trigger-content\">\n              <div class=\"trigger-icon\">\n                <i class=\"fas fa-headset\"></i>\n                <span class=\"unread-badge\" v-if=\"unreadCount > 0\">{{ unreadCount }}</span>\n              </div>\n              <span class=\"trigger-text\">在线客服</span>\n            </div>\n          </div>\n\n          <!-- 聊天面板 -->\n          <transition name=\"slide-up\">\n            <div v-show=\"chatPanelOpen\" class=\"chat-panel\">\n              <div class=\"panel-header\">\n                <div class=\"header-info\">\n                  <i class=\"fas fa-comments\"></i>\n                  <div class=\"header-text\">\n                    <h3>客户消息</h3>\n                    <span class=\"header-subtitle\">{{ activeOrders.length }}个待处理订单</span>\n                  </div>\n                </div>\n                <div class=\"header-actions\">\n                  <button class=\"action-btn\" @click=\"refreshOrders\" title=\"刷新\">\n                    <i class=\"fas fa-sync-alt\"></i>\n                  </button>\n                  <button class=\"action-btn\" @click=\"toggleChatPanel\" title=\"最小化\">\n                    <i class=\"fas fa-minus\"></i>\n                  </button>\n                </div>\n              </div>\n\n              <div class=\"panel-content\">\n                <!-- 订单列表 -->\n                <div class=\"orders-list custom-scrollbar\">\n                  <div \n                    v-for=\"order in activeOrders\" \n                    :key=\"order.orderId\"\n                    class=\"order-card\"\n                    :class=\"{ \n                      'active': selectedOrder?.orderId === order.orderId,\n                      'has-unread': order.unreadCount > 0 \n                    }\"\n                    @click=\"selectOrder(order)\"\n                  >\n                    <div class=\"order-main\">\n                      <div class=\"order-header\">\n                        <span class=\"order-id\">#{{ order.orderId.slice(-8) }}</span>\n                        <span class=\"order-amount\">¥{{ formatAmount(order.amount) }}</span>\n                      </div>\n                      <div class=\"order-footer\">\n                        <span class=\"order-time\">\n                          <i class=\"far fa-clock\"></i>\n                          {{ formatTime(order.createdAt) }}\n                        </span>\n                        <span \n                          v-if=\"order.unreadCount\" \n                          class=\"unread-count\"\n                        >{{ order.unreadCount }}条新消息</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <!-- 聊天区域 -->\n                <div class=\"chat-area\" v-if=\"selectedOrder\">\n                  <div class=\"chat-messages custom-scrollbar\" ref=\"messagesContainer\">\n                    <div \n                      v-for=\"message in messages\" \n                      :key=\"message._id\"\n                      class=\"message\"\n                      :class=\"message.sender === 'merchant' ? 'sent' : 'received'\"\n                    >\n                      <div class=\"message-bubble\">\n                        <div class=\"message-content\">{{ message.content }}</div>\n                        <div class=\"message-time\">{{ formatTime(message.createdAt) }}</div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class=\"chat-composer\">\n                    <div class=\"composer-tools\">\n                      <button class=\"tool-btn\" title=\"表情\">\n                        <i class=\"far fa-smile\"></i>\n                      </button>\n                      <button class=\"tool-btn\" title=\"图片\">\n                        <i class=\"far fa-image\"></i>\n                      </button>\n                    </div>\n                    <div class=\"composer-input\">\n                      <input \n                        v-model=\"newMessage\"\n                        @keyup.enter=\"sendMessage\"\n                        placeholder=\"输入消息...\"\n                      >\n                      <button \n                        class=\"send-btn\"\n                        @click=\"sendMessage\"\n                        :disabled=\"!newMessage.trim()\"\n                      >\n                        <i class=\"fas fa-paper-plane\"></i>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n\n                <!-- 空状态 -->\n                <div v-else class=\"empty-state\">\n                  <div class=\"empty-icon\">\n                    <i class=\"fas fa-comments\"></i>\n                  </div>\n                  <h3>选择订单开始对话</h3>\n                  <p>点击左侧订单列表开始沟通</p>\n                </div>\n              </div>\n            </div>\n          </transition>\n        </div>\n      </div>\n    </template>\n    \n    <router-view v-else></router-view>\n\n    <!-- 添加全局消息监听器 -->\n    <GlobalMessageListener v-if=\"isLoggedIn\" />\n  </div>\n</template>\n\n<script>\nimport { EventBus } from './eventBus'\nimport GlobalMessageListener from '@/components/GlobalMessageListener.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    GlobalMessageListener\n  },\n  data() {\n    return {\n      menuItems: [\n        {\n          name: 'channel-market',\n          text: '通道市场',\n          path: '/channel-market',\n          icon: 'fas fa-random',\n          roles: ['user', 'admin', 'superadmin'],\n          expanded: false\n        },\n        {\n          name: 'order-query',\n          text: '订单查询',\n          path: '/order-query',\n          icon: 'fas fa-search',\n          roles: ['user', 'admin', 'superadmin'],\n          expanded: false\n        },\n        {\n          name: 'balance-change',\n          text: '余额变动',\n          path: '/balance-change',\n          icon: 'fas fa-wallet',\n          roles: ['user', 'admin', 'superadmin'],\n          expanded: false\n        },\n        {\n          name: 'tool-download',\n          text: '抓包工具',\n          path: '/tool-download',\n          icon: 'fas fa-download',\n          roles: ['user', 'admin', 'superadmin'],\n          expanded: false\n        },\n        {\n          name: 'toolbox',\n          text: '工具箱',\n          path: '#',\n          icon: 'fas fa-tools',\n          roles: ['user', 'admin', 'superadmin'],\n          expanded: false,\n          children: [\n            {\n              name: 'sdk-to-direct-pay',\n              text: 'SDK转直付',\n              path: '/toolbox/sdk-to-direct-pay',\n              icon: 'fab fa-alipay',\n              roles: ['user', 'admin', 'superadmin']\n            }\n          ]\n        },\n        {\n          name: 'admin',\n          text: '系统管理',\n          path: '#',\n          icon: 'fas fa-cogs',\n          roles: ['superadmin'],\n          expanded: false,\n          children: [\n            {\n              name: 'user-management',\n              text: '用户管理',\n              path: '/user-management',\n              icon: 'fas fa-users-cog',\n              roles: ['superadmin']\n            },\n            {\n              name: 'recharge-cards',\n              text: '卡密管理',\n              path: '/recharge-cards',\n              icon: 'fas fa-ticket-alt',\n              roles: ['superadmin']\n            },\n            {\n              name: 'generate-cards',\n              text: '卡密生成',\n              path: '/generate-cards',\n              icon: 'fas fa-plus-circle',\n              roles: ['superadmin']\n            },\n            {\n              name: 'invite-codes',\n              text: '邀请码管理',\n              path: '/invite-codes',\n              icon: 'fas fa-user-plus',\n              roles: ['superadmin']\n            },\n            {\n              name: 'domain-management',\n              text: '域名管理',\n              path: '/domain-management',\n              icon: 'fas fa-globe',\n              roles: ['superadmin']\n            }\n          ]\n        }\n      ],\n      sidebarActive: false,\n      isMobile: false,\n      currentUserId: null,\n      userRole: localStorage.getItem('userRole'),\n      isLoggedIn: localStorage.getItem('isLoggedIn') === 'true',\n      currentUser: localStorage.getItem('username') || '未登录',\n      \n      // 聊天相关的data\n      showChatWidget: false,\n      chatPanelOpen: false,\n      activeOrders: [],\n      selectedOrder: null,\n      messages: [],\n      newMessage: '',\n      unreadCount: 0,\n      messageSubscriptions: new Set(),\n      currentOrderId: null,\n      notifications: [],\n      notificationAudio: null,\n      activeNotifications: [],\n      chatMessages: new Map(),\n      processedMessageIds: new Set(),\n      notificationSound: null,\n    }\n  },\n  computed: {\n    filteredMenuItems() {\n      const userRole = this.userRole || localStorage.getItem('userRole');\n      if (!userRole) return [];\n      \n      return this.menuItems.filter(item => \n        item.roles && item.roles.includes(userRole)\n      );\n    },\n    userRoleText() {\n      const role = this.userRole || localStorage.getItem('userRole');\n      switch(role) {\n        case 'superadmin': return '超级管理员';\n        case 'admin': return '管理员';\n        case 'user': return '普通用户';\n        default: return '未知角色';\n      }\n    }\n  },\n  methods: {\n    handleMenuClick(item, event) {\n      // 如果侧边栏是折叠状态\n      if (!this.sidebarActive) {\n        // 阻止默认行为，避免自动展开\n        event.preventDefault();\n        \n        // 如果点击的是有子菜单的项，不做任何操作\n        if (item.children && item.children.length > 0) {\n          return;\n        }\n        \n        // 如果点击的是没有子菜单的项，进行路由跳转，但不展开侧边栏\n        if (item.path && item.path !== '#') {\n          this.$router.push(item.path);\n        }\n        \n        // 对于移动设备，还是需要关闭侧边栏\n        if (this.isMobile) {\n          this.closeSidebarOnMobile();\n        }\n        \n        return;\n      }\n      \n      // 下面的代码只在侧边栏展开状态下执行\n      \n      // 如果点击的是有子菜单的项\n      if (item.children && item.children.length > 0) {\n        event.preventDefault(); // 阻止导航\n        const wasExpanded = item.expanded;\n        // 先关闭所有其他菜单\n        this.menuItems.forEach(i => {\n          i.expanded = false;\n        });\n        // 然后切换当前点击项的展开状态\n        item.expanded = !wasExpanded;\n      } else {\n        // 如果是移动端，点击后关闭侧边栏\n        this.closeSidebarOnMobile();\n        // 没有子菜单的项允许正常导航\n      }\n    },\n    \n    handleLoginStateChange(loggedIn) {\n      this.isLoggedIn = loggedIn;\n      if (loggedIn) {\n        this.currentUser = localStorage.getItem('username') || '未登录';\n        this.userRole = localStorage.getItem('userRole');\n        this.currentUserId = localStorage.getItem('currentUserId');\n        this.sidebarActive = !this.isMobile;\n        \n        this.$nextTick(() => {\n          this.menuItems = [...this.menuItems];\n        });\n      } else {\n        this.currentUser = '未登录';\n        this.userRole = null;\n        this.currentUserId = null;\n        this.sidebarActive = false;\n        this.menuItems = [...this.menuItems];\n      }\n    },\n\n    initializeLoginState() {\n      const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';\n      if (isLoggedIn) {\n        this.handleLoginStateChange(true);\n      }\n    },\n\n    async handleLogout() {\n      // 清除所有存储的信息\n      localStorage.removeItem('isLoggedIn');\n      localStorage.removeItem('token');\n      localStorage.removeItem('username');\n      localStorage.removeItem('userRole');\n      localStorage.removeItem('currentUserId');\n      \n      // 重置组件状态\n      this.isLoggedIn = false;\n      this.currentUser = '未登录';\n      this.userRole = null;\n      this.currentUserId = null;\n      this.sidebarActive = false;\n      \n      // 断开 socket 连接\n      if (this.$socket) {\n        // 移除所有监听器\n        this.$socket.off('merchantMessage');\n        this.$socket.off('newOrder');\n        this.$socket.off('newMessage');\n        this.$socket.off('chat:message');\n        \n        // 断开连接\n        this.$socket.disconnect();\n      }\n      \n      // 清空消息和通知\n      this.notifications = [];\n      this.activeOrders = [];\n      this.messages = [];\n      this.chatMessages = new Map();\n      this.processedMessageIds = new Set();\n      \n      // 清空菜单缓存\n      this.$nextTick(() => {\n        this.menuItems = [...this.menuItems];\n      });\n      \n      // 触发登出事件\n      EventBus.$emit('login-state-changed', false);\n      \n      // 跳转到登录页\n      await this.$router.replace('/');\n    },\n    toggleSidebar() {\n      // 在状态改变前先添加过渡类\n      if (this.sidebarActive) {\n        document.body.classList.add('sidebar-collapsing');\n        // 在过渡开始前先隐藏文本，避免文字乱跳\n        setTimeout(() => {\n          this.sidebarActive = false;\n          // 过渡结束后移除类\n          setTimeout(() => {\n            document.body.classList.remove('sidebar-collapsing');\n          }, 300);\n        }, 10);\n      } else {\n        this.sidebarActive = true;\n      }\n    },\n    closeSidebarOnMobile() {\n      if (this.isMobile) {\n        this.sidebarActive = false;\n      }\n    },\n    handleResize() {\n      const wasNotMobile = !this.isMobile;\n      this.isMobile = window.innerWidth <= 768;\n      \n      // 如果从移动设备切换到桌面设备，保持侧边栏打开\n      if (!this.isMobile && wasNotMobile === false) {\n        this.sidebarActive = true;\n      }\n      \n      // 如果切换到移动设备并且侧边栏是折叠状态，保持折叠\n      if (this.isMobile && !this.sidebarActive) {\n        this.sidebarActive = false;\n      }\n    },\n    \n    // 添加聊天相关的methods\n    toggleChatPanel() {\n      this.chatPanelOpen = !this.chatPanelOpen;\n      if (this.chatPanelOpen) {\n        this.loadActiveOrders();\n      }\n    },\n    \n    async loadActiveOrders() {\n      try {\n        const response = await this.$api.get('/orders', {\n          params: {\n            status: 'pending',\n            limit: 50\n          }\n        });\n        this.activeOrders = response.data.orders;\n      } catch (error) {\n        console.error('Load orders error:', error);\n      }\n    },\n    \n    async selectOrder(order) {\n      this.selectedOrder = order;\n      \n      if (!this.chatMessages.has(order.orderId)) {\n        this.chatMessages.set(order.orderId, []);\n      }\n\n      try {\n        // 加载历史消息\n        const response = await this.$api.get(`/messages/${order.orderId}`);\n        const messages = response.data;\n        \n        // 处理消息\n        messages.forEach(msg => {\n          if (!this.processedMessageIds.has(msg._id)) {\n            this.processedMessageIds.add(msg._id);\n            this.chatMessages.get(order.orderId).push(msg);\n          }\n        });\n\n        // 更新订单的未读消息计数\n        const index = this.activeOrders.findIndex(o => o.orderId === order.orderId);\n        if (index !== -1) {\n          this.$set(this.activeOrders[index], 'unreadCount', 0);\n        }\n\n        // 初始化 socket 监听\n        this.initOrderSocket(order.orderId);\n\n      } catch (error) {\n        console.error('Load messages error:', error);\n        this.$message.error('加载消息失败');\n      }\n    },\n\n    // 处理新消息\n    handleNewMessage(message) {\n      // 检查消息是否重复\n      const isDuplicate = this.messages.some(m => \n        m._id === message._id || \n        (m.content === message.content && \n         m.sender === message.sender && \n         Math.abs(new Date(m.createdAt) - new Date(message.createdAt)) < 1000)\n      );\n\n      if (!isDuplicate) {\n        this.messages.push(message);\n        this.$nextTick(() => {\n          this.scrollToBottom();\n        });\n      }\n    },\n\n    async sendMessage() {\n      if (!this.newMessage.trim() || !this.selectedOrder) return;\n      \n      const messageContent = this.newMessage;\n      this.newMessage = '';\n      \n      try {\n        const userId = localStorage.getItem('currentUserId');\n        const response = await this.$api.post(`/messages/${this.selectedOrder.orderId}`, {\n          content: messageContent.trim(),\n          sender: 'merchant',\n          userId: userId\n        });\n\n        // 直接调用消息处理方法\n        this.handleNewOrderMessage(this.selectedOrder.orderId, response.data);\n        \n      } catch (error) {\n        console.error('Send message error:', error);\n        this.$message.error('发送消息失败');\n        // 发送失败时恢复消息内容\n        this.newMessage = messageContent;\n      }\n    },\n    \n    scrollToBottom() {\n      const container = this.$refs.messagesContainer;\n      if (container) {\n        container.scrollTop = container.scrollHeight;\n      }\n    },\n    \n    formatAmount(amount) {\n      return parseFloat(amount || 0).toFixed(2);\n    },\n    \n    formatTime(time) {\n      return new Date(time).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n    },\n    \n    formatDate(time) {\n      return new Date(time).toLocaleDateString();\n    },\n    \n    setupWebSocket() {\n      if (this.$socket) {\n        this.$socket.connect();\n        \n        // 移除旧的监听器\n        this.$socket.off('merchantMessage');\n        \n        // 监听商家消息\n        this.$socket.on('merchantMessage', (data) => {\n          \n          const userId = localStorage.getItem('currentUserId');\n          const userRole = localStorage.getItem('userRole');\n          const isOrderOwner = data.orderUserId === userId;\n          const isSuperAdmin = userRole === 'superadmin';\n          \n          // 如果是超级管理员或订单所有者\n          if (isSuperAdmin || isOrderOwner) {\n            // 添加通知\n            this.addNotification({\n              orderId: data.orderId,\n              message: data.message.content\n            });\n            \n            // 显示浏览器通知\n            this.showBrowserNotification(data.orderId, data.message.content);\n          }\n        });\n\n        // 加入用户特定房间\n        const userId = localStorage.getItem('currentUserId');\n        if (userId) {\n          this.$socket.emit('join-chat', { userId });\n        }\n      }\n    },\n    closeChatWidget() {\n      this.showChatWidget = false;\n      localStorage.removeItem('showChatWidget');\n    },\n    async fetchActiveOrders() {\n      try {\n        const response = await this.$api.get('/orders/active'); // 获取所有活跃订单\n        \n        // 确保每个订单都有 unreadCount 属性\n        this.activeOrders = response.data.map(order => ({\n          ...order,\n          unreadCount: 0\n        }));\n\n        // 为每个活跃订单设置消息监听\n        this.setupOrderMessageListeners();\n        \n      } catch (error) {\n        console.error('获取活跃订单失败:', error);\n      }\n    },\n    setupOrderMessageListeners() {\n      // 清理旧的监听器\n      if (this.activeOrders) {\n        this.activeOrders.forEach(order => {\n          this.$socket.off(`chat:${order.orderId}`);\n        });\n      }\n\n      // 设置新的监听器\n      this.activeOrders.forEach(order => {\n        this.$socket.on(`chat:${order.orderId}`, (message) => {\n          // 只处理客户发送的消息\n          if (message.sender === 'user') {\n            // 播放提示音\n            this.playNotificationSound();\n            \n            // 更新未读消息计数\n            const orderIndex = this.activeOrders.findIndex(o => o.orderId === order.orderId);\n            if (orderIndex !== -1) {\n              this.activeOrders[orderIndex].unreadCount++;\n            }\n\n            // 添加通知\n            this.addNotification({\n              id: Date.now(),\n              orderId: order.orderId,\n              message: message.content,\n              timestamp: new Date()\n            });\n\n            // 显示浏览器通知\n            this.showBrowserNotification(order.orderId, message.content);\n          }\n        });\n      });\n    },\n\n    playNotificationSound() {\n      if (this.notificationSound) {\n        this.notificationSound.currentTime = 0; // 重置音频播放位置\n        this.notificationSound.play().catch(error => {\n          console.warn('Failed to play notification sound:', error);\n        });\n      }\n    },\n\n    showBrowserNotification(orderId, content) {\n      if (Notification.permission === 'granted') {\n        const notification = new Notification('新的客服消息', {\n          body: `订单 ${orderId}: ${content}`,\n          icon: '/favicon.ico',\n          tag: orderId,\n          requireInteraction: true\n        });\n\n        notification.onclick = () => {\n          window.focus();\n          this.$router.push(`/order-query?orderId=${orderId}`);\n          notification.close();\n        };\n      }\n    },\n\n    refreshOrders() {\n      this.fetchActiveOrders();\n    },\n    initializeSocket() {\n      if (!this.$socket) return;\n\n      // 初始化音频对象\n      if (!this.notificationAudio) {\n        this.notificationAudio = new Audio('/notification.mp3');\n        // 预加载音频\n        this.notificationAudio.load();\n      }\n\n      // 监听全局新订单事件\n      this.$socket.on('newOrder', (order) => {\n        this.setupOrderListener(order.orderId);\n      });\n\n      // 监听全局消息事件\n      this.$socket.on('newMessage', (message) => {\n        if (message.sender === 'user') {\n          this.playNotificationSound();\n          this.addNotification({\n            id: Date.now(),\n            orderId: message.orderId,\n            message: message.content,\n            timestamp: new Date()\n          });\n        }\n      });\n\n      // 监听所有聊天室的消息\n      this.$socket.on('chat:message', ({ orderId, message }) => {\n        if (message.sender === 'user') {\n          this.playNotificationSound();\n          this.addNotification({\n            id: Date.now(),\n            orderId,\n            message: message.content,\n            timestamp: new Date()\n          });\n        }\n      });\n    },\n\n    setupOrderListener(orderId) {\n      if (!orderId) return;\n      \n      // 加入聊天室\n      this.$socket.emit('join-chat', orderId);\n    },\n\n    showNotification(orderId, message) {\n      // 检查通知权限\n      if (Notification.permission === 'granted') {\n        const notification = new Notification('新的客服消息', {\n          body: `订单 ${orderId}: ${message}`,\n          icon: '/logo.png',\n          tag: orderId,\n          requireInteraction: true,\n          silent: false\n        });\n\n        notification.onclick = () => {\n          // 点击通知时跳转到订单查询页面\n          this.$router.push({\n            path: '/order-query',\n            query: { openChat: orderId }\n          });\n          window.focus();\n          notification.close();\n        };\n      } else if (Notification.permission !== 'denied') {\n        // 如果没有限，请求权限\n        Notification.requestPermission().then(permission => {\n          if (permission === 'granted') {\n            this.showNotification(orderId, message);\n          }\n        });\n      }\n    },\n\n    addNotification(notification) {\n      // 添加新通知到数组开头\n      this.notifications.unshift({\n        id: Date.now(),\n        orderId: notification.orderId,\n        displayId: notification.orderId.slice(-8),\n        message: notification.message,\n        timestamp: new Date()\n      });\n\n      // 限制最多显示 5 条通知\n      if (this.notifications.length > 5) {\n        this.notifications.pop();\n      }\n\n      // 播放通知声音\n      this.playNotificationSound();\n\n      // 显示浏览器通知\n      this.showBrowserNotification(notification.orderId, notification.message);\n\n      // 3秒后自动移除通知\n      setTimeout(() => {\n        this.removeNotification(this.notifications[0].id);\n      }, 5000);\n    },\n\n    handleNotificationClick(notification) {\n      // 点击通知时跳转到相应页面\n      this.$router.push(`/order-query?orderId=${notification.orderId}`);\n      this.removeNotification(notification.id);\n    },\n\n    removeNotification(id) {\n      const index = this.notifications.findIndex(n => n.id === id);\n      if (index !== -1) {\n        this.notifications.splice(index, 1);\n      }\n    },\n\n    requestNotificationPermission() {\n      if (Notification.permission !== 'granted' && Notification.permission !== 'denied') {\n        Notification.requestPermission();\n      }\n    },\n\n    initOrderSocket(orderId) {\n      if (!this.$socket) return;\n\n      const userId = localStorage.getItem('currentUserId');\n      \n      // 加入聊天室\n      this.$socket.emit('join-chat', { \n        orderId: orderId,\n        userId: userId\n      });\n\n      // 先移除之前的监听器\n      this.$socket.off(`chat:${orderId}`);\n\n      // 监听特定订的消息\n      this.$socket.on(`chat:${orderId}`, (message) => {\n        this.handleNewOrderMessage(orderId, message);\n      });\n    },\n\n    handleNewOrderMessage(orderId, message) {\n      // 检查消息是否已处理\n      if (!this.processedMessageIds.has(message._id)) {\n        this.processedMessageIds.add(message._id);\n        \n        // 确保订单的消息数组存在\n        if (!this.chatMessages.has(orderId)) {\n          this.chatMessages.set(orderId, []);\n        }\n        \n        // 获取当前消息列表的本\n        const messages = [...this.chatMessages.get(orderId)];\n        \n        // 添加新消息\n        messages.push(message);\n        \n        // 按时间排序\n        messages.sort((a, b) => new Date(a.createdAt) - new Date(b.createdAt));\n        \n        // 更新消息列表\n        this.$set(this.chatMessages, orderId, messages);\n        \n        // 如果不当前选中的订单，增加未读计数\n        if (this.selectedOrder?.orderId !== orderId) {\n          const index = this.activeOrders.findIndex(o => o.orderId === orderId);\n          if (index !== -1) {\n            const order = {...this.activeOrders[index]};\n            order.unreadCount = (order.unreadCount || 0) + 1;\n            this.$set(this.activeOrders, index, order);\n          }\n        }\n\n        // 触发视图更新\n        this.$nextTick(() => {\n          this.scrollToBottom();\n        });\n      }\n    },\n\n    // 处理全局消息事件\n    handleGlobalMessage(event) {\n      const { orderId, message, isOwner } = event;\n      \n      // 如果是订单所有者或超级管理员,显示通知\n      if (isOwner || this.userRole === 'superadmin') {\n        this.showGlobalNotification(orderId, message);\n      }\n    },\n\n    // 显示通知\n    showGlobalNotification(orderId, message) {\n      const displayId = orderId.slice(-8); // 取订单ID的后8\n      const notification = {\n        id: Date.now(),\n        orderId,\n        displayId,\n        message\n      };\n\n      this.notifications.push(notification);\n      \n      // 3秒后自动移除通知\n      setTimeout(() => {\n        this.removeGlobalNotification(notification.id);\n      }, 3000);\n    },\n\n    // 移除通知\n    removeGlobalNotification(id) {\n      const index = this.notifications.findIndex(n => n.id === id);\n      if (index !== -1) {\n        this.notifications.splice(index, 1);\n      }\n    },\n\n    // 点击通知的处理\n    handleGlobalNotificationClick(notification) {\n      this.$router.push(`/order-query?orderId=${notification.orderId}`);\n      this.removeGlobalNotification(notification.id);\n    },\n\n    updateCurrentUser() {\n      // 获取新的用户信息\n      const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';\n      const username = localStorage.getItem('username');\n      const userRole = localStorage.getItem('userRole');\n      const userId = localStorage.getItem('currentUserId');\n\n      // 更新组件状态\n      this.isLoggedIn = isLoggedIn;\n      this.currentUser = username || '未登录';\n      this.userRole = userRole;\n      this.currentUserId = userId;\n\n      // 在非移动端且已登录时自动展开侧边栏\n      if (!this.isMobile && isLoggedIn) {\n        this.sidebarActive = true;\n      }\n\n      // 如果已登录但 socket 未连接，则初始化 socket\n      if (isLoggedIn && (!this.$socket || !this.$socket.connected)) {\n        this.setupWebSocket();\n      }\n\n    },\n\n    // 添加一个方法来清理所有 socket 相关的资源\n    cleanupSocket() {\n      if (this.$socket) {\n        // 移除所有监听器\n        this.$socket.removeAllListeners();\n        // 断开连接\n        this.$socket.disconnect();\n      }\n    },\n\n    initNotificationSound() {\n      // 初始化通知声音\n      this.notificationSound = new Audio('/notification.mp3');\n      this.notificationSound.load(); // 预加载音频\n    },\n  },\n  created() {\n    // 初始化登录状态\n    this.initializeLoginState();\n\n    // 监听登录状态变化\n    EventBus.$on('login-state-changed', (loggedIn) => {\n      this.handleLoginStateChange(loggedIn);\n    });\n  },\n  mounted() {\n    this.handleResize();\n    window.addEventListener('resize', this.handleResize);\n    \n    // 确保在挂载后也检查一次登录状态\n    this.$nextTick(() => {\n      if (this.isLoggedIn) {\n        this.handleLoginStateChange(true);\n      }\n    });\n\n    // 初始化通知声音\n    this.initNotificationSound();\n    \n    // 请求通知权限\n    if (\"Notification\" in window && Notification.permission === \"default\") {\n      Notification.requestPermission();\n    }\n  },\n  beforeDestroy() {\n    window.removeEventListener('resize', this.handleResize);\n    EventBus.$off('user-logged-in');\n    EventBus.$off('login-state-changed');\n    \n    // 清理 socket\n    this.cleanupSocket();\n  },\n  watch: {\n    // 监听路由变化\n    $route: {\n      handler() {\n        // 每次路由变化时检查登录状态，但只更新数据，不改变UI（如侧边栏状态）\n        const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';\n        const userRole = localStorage.getItem('userRole');\n        \n        // 只有在角色实际发生变化时才触发菜单重新计算\n        if (this.userRole !== userRole) {\n          this.userRole = userRole;\n          this.$nextTick(() => {\n            // 通过重新赋值来触发 computed property 的更新\n            this.menuItems = [...this.menuItems];\n          });\n        }\n\n        this.isLoggedIn = isLoggedIn;\n        this.currentUser = localStorage.getItem('username') || '未登录';\n        this.currentUserId = localStorage.getItem('currentUserId');\n      },\n      immediate: true\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* 顶部导航栏样式 */\n.header {\n  background: #FFFFFF;\n  padding: 0;\n  display: flex;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 50;\n  height: var(--header-height);\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);\n  border-bottom: none;\n  transition: all 0.3s ease;\n}\n\n.header-container {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  max-width: 1920px;\n  margin: 0 auto;\n  padding: 0 1.5rem;\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n  height: 100%;\n}\n\n.site-title {\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n  height: 100%;\n}\n\n.site-logo {\n  width: 2rem;\n  height: 2rem;\n  background: linear-gradient(135deg, #4F46E5, #818CF8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 10px;\n  color: white;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  box-shadow: 0 2px 8px rgba(79, 70, 229, 0.2);\n}\n\n.site-logo::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: rgba(255, 255, 255, 0.2);\n  transform: skewX(-25deg);\n  animation: shine 3s infinite;\n}\n\n.site-logo i {\n  font-size: 1.125rem;\n  transition: all 0.3s ease;\n}\n\n.site-logo:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);\n}\n\n.site-logo:hover i {\n  transform: rotate(15deg);\n}\n\n.site-text {\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: #1E293B;\n  margin: 0;\n  transition: all 0.3s ease;\n  letter-spacing: -0.01em;\n  white-space: nowrap;\n  position: relative;\n  padding-right: 0.25rem;\n}\n\n.site-text::after {\n  content: '';\n  position: absolute;\n  bottom: -0.25rem;\n  left: 0;\n  width: 0;\n  height: 2px;\n  background: #4F46E5;\n  transition: width 0.3s ease;\n}\n\n.site-title:hover .site-text::after {\n  width: 100%;\n}\n\n/* 右侧部分样式 */\n.header-right {\n  display: flex;\n  align-items: center;\n  height: 100%;\n}\n\n/* 用户菜单样式 */\n\n.user-info {\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n  padding: 0.25rem;\n  padding-right: 0.625rem;\n  cursor: pointer;\n  border-radius: 9999px;\n  transition: all 0.2s ease;\n  position: relative;\n}\n\n.user-info:hover {\n  background: #F1F5F9;\n}\n\n.avatar {\n  width: 2rem;\n  height: 2rem;\n  border-radius: 50%;\n  background: #E0E7FF;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #4F46E5;\n  font-size: 0.875rem;\n}\n\n.user-details {\n  display: flex;\n  flex-direction: column;\n  line-height: 1.2;\n  max-width: 120px;\n}\n\n.username {\n  font-weight: 600;\n  color: #1E293B;\n  font-size: 0.875rem;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.role {\n  font-size: 0.75rem;\n  color: #64748B;\n}\n\n.dropdown-icon {\n  font-size: 0.6875rem;\n  color: #94A3B8;\n  margin-left: 0.25rem;\n}\n\n.user-dropdown {\n  position: absolute;\n  top: calc(100% + 0.5rem);\n  right: 0;\n  width: 150px;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  border: 1px solid #E2E8F0;\n  padding: 0.5rem 0;\n  z-index: 100;\n  opacity: 0;\n  visibility: hidden;\n  transform: translateY(-10px);\n  transition: all 0.2s ease;\n}\n\n.user-info:hover .user-dropdown {\n  opacity: 1;\n  visibility: visible;\n  transform: translateY(0);\n}\n\n.dropdown-item {\n  padding: 0.625rem 1rem;\n  display: flex;\n  align-items: center;\n  gap: 0.625rem;\n  color: #334155;\n  transition: all 0.2s ease;\n}\n\n.dropdown-item:hover {\n  background: #F1F5F9;\n  color: #4F46E5;\n}\n\n.dropdown-item i {\n  font-size: 0.875rem;\n  width: 1rem;\n}\n\n/* 汉堡按钮样式 */\n.menu-toggle {\n  background: none;\n  border: none;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 2.5rem;\n  height: 2.5rem;\n  margin-right: 0.5rem;\n  border-radius: 8px;\n  transition: all 0.2s ease;\n  color: #334155;\n}\n\n.menu-toggle:hover {\n  background: #F1F5F9;\n}\n\n.hamburger-icon {\n  width: 1.25rem;\n  height: 1rem;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.hamburger-icon .line {\n  display: block;\n  width: 100%;\n  height: 2px;\n  background-color: currentColor;\n  border-radius: 2px;\n  transition: all 0.3s ease;\n}\n\n.hamburger-icon.active .line-1 {\n  transform: translateY(8px) rotate(45deg);\n}\n\n.hamburger-icon.active .line-2 {\n  opacity: 0;\n  transform: translateX(-10px);\n}\n\n.hamburger-icon.active .line-3 {\n  transform: translateY(-8px) rotate(-45deg);\n}\n\n@keyframes shine {\n  0% { left: -100%; }\n  20% { left: 100%; }\n  100% { left: 100%; }\n}\n\n/* 媒体查询 */\n@media (max-width: 1024px) {  \n  .user-details {\n    max-width: 80px;\n  }\n}\n\n@media (max-width: 768px) {\n  .header-container {\n    padding: 0 1rem;\n  }\n  \n  .site-text {\n    font-size: 1rem;\n  }\n  \n  .user-details {\n    display: none;\n  }\n  \n  .dropdown-icon {\n    display: none;\n  }\n}\n\n@media (max-width: 480px) {\n  .header-container {\n    padding: 0 0.75rem;\n  }\n  \n  .site-logo {\n    width: 1.75rem;\n    height: 1.75rem;\n  }\n  \n  .site-logo i {\n    font-size: 1rem;\n  }\n  \n  .menu-toggle {\n    width: 2rem;\n    height: 2rem;\n    margin-right: 0.25rem;\n  }\n  \n  .hamburger-icon {\n    width: 1rem;\n    height: 0.875rem;\n  }\n}\n\n/* 其余样式保持不变 */\n.container {\n  display: flex;\n  min-height: 100vh;\n  padding-top: var(--header-height);\n  background: #FFFFFF;\n}\n\n.sidebar {\n  background: #FFFFFF;\n  width: 280px;\n  height: calc(100vh - var(--header-height));\n  position: fixed;\n  top: var(--header-height);\n  left: 0;\n  overflow-y: auto;\n  overflow-x: hidden;\n  transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  z-index: 40;\n  box-shadow: none;\n  display: flex;\n  flex-direction: column;\n  color: #334155;\n  padding-top: 0;\n  border-right: 1px solid #F1F5F9;\n  margin-top: -1px;\n}\n\n.main-content {\n  flex: 1;\n  margin-left: 280px;\n  min-height: calc(100vh - var(--header-height));\n  background: #F8FAFC;\n  transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  padding: 2rem;\n  position: relative;\n  z-index: 20;\n  will-change: margin-left;\n}\n\n.content-wrapper {\n  max-width: 1200px;\n  margin: 0 auto;\n  background: white;\n  border-radius: var(--radius-lg);\n  padding: 2rem;\n  box-shadow: var(--shadow);\n  min-height: calc(100vh - var(--header-height) - 4rem);\n}\n\n/* 大屏幕优化 */\n@media (min-width: 1440px) {\n  .content-wrapper {\n    max-width: 1400px;\n  }\n\n  .sidebar {\n    width: 300px;\n  }\n\n  .main-content {\n    margin-left: 300px;\n    padding: 2.5rem;\n  }\n}\n\n/* 中等屏幕优化 */\n@media (max-width: 1200px) {\n  .content-wrapper {\n    max-width: 100%;\n  }\n\n  .main-content {\n    padding: 1.5rem;\n  }\n}\n\n/* 平板电脑优化 */\n@media (max-width: 1024px) {\n  .sidebar {\n    transform: translateX(-100%);\n  }\n\n  .sidebar.active {\n    transform: translateX(0);\n  }\n\n  .main-content {\n    margin-left: 0;\n    width: 100%;\n  }\n\n  .content-wrapper {\n    padding: 1.5rem;\n  }\n\n  .header-left h1 {\n    font-size: 1.25rem;\n  }\n}\n\n/* 手机优化 */\n@media (max-width: 640px) {\n  .header {\n    padding: 0.75rem 1rem;\n  }\n\n  .header-left h1 {\n    font-size: 1.125rem;\n  }\n\n  .main-content {\n    padding: 1rem;\n  }\n\n  .content-wrapper {\n    padding: 1rem;\n    border-radius: var(--radius);\n  }\n\n  .sidebar {\n    width: 260px;\n  }\n\n  .user-info {\n    display: none;\n  }\n\n  .btn-logout span {\n    display: none;\n  }\n}\n\n/* 小手机优化 */\n@media (max-width: 380px) {\n  .header-left h1 {\n    font-size: 1rem;\n  }\n\n  .main-content {\n    padding: 0.75rem;\n  }\n\n  .content-wrapper {\n    padding: 0.75rem;\n  }\n\n  .sidebar {\n    width: 240px;\n  }\n}\n\n/* 其他样式保持不变，但添加一些细节优化 */\n.header-left {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.header-right {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.menu-toggle {\n  background: none;\n  border: none;\n  color: var(--text-primary);\n  font-size: 1.25rem;\n  padding: 0.5rem;\n  cursor: pointer;\n  margin-right: 1rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  border-radius: 8px;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n  z-index: 100;\n}\n\n.menu-toggle::before {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  background: rgba(79, 70, 229, 0.08);\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n  transition: width 0.4s ease, height 0.4s ease;\n  z-index: -1;\n}\n\n.menu-toggle:hover {\n  color: #4F46E5;\n  background: rgba(79, 70, 229, 0.05);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);\n}\n\n.menu-toggle:hover::before {\n  width: 120px;\n  height: 120px;\n}\n\n.menu-toggle:active {\n  transform: translateY(0);\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);\n}\n\n.menu-toggle i {\n  transition: transform 0.3s ease;\n}\n\n/* 汉堡菜单动画 */\n.hamburger-icon {\n  width: 24px;\n  height: 20px;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n.hamburger-icon .line {\n  display: block;\n  width: 100%;\n  height: 3px;\n  background-color: currentColor;\n  border-radius: 6px;\n  transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n  transform-origin: center;\n}\n\n/* 第一条线变形 */\n.hamburger-icon.active .line-1 {\n  transform: translateY(8.5px) rotate(45deg);\n}\n\n/* 第二条线淡出 */\n.hamburger-icon.active .line-2 {\n  opacity: 0;\n  transform: scaleX(0);\n}\n\n/* 第三条线变形 */\n.hamburger-icon.active .line-3 {\n  transform: translateY(-8.5px) rotate(-45deg);\n}\n\n/* 大屏幕时隐藏菜单按钮 */\n@media (min-width: 1025px) {\n  .menu-toggle {\n    display: none !important;\n  }\n\n  .sidebar {\n    transform: none !important;\n  }\n\n  .main-content {\n    margin-left: 280px;\n  }\n  \n  .sidebar-collapsed .main-content {\n    margin-left: 70px;\n  }\n  \n  .sidebar-collapsed .sidebar {\n    width: 70px;\n  }\n\n  /* 优化侧边栏过渡效果 */\n  .sidebar-content, \n  .sidebar-footer {\n    transition: padding 0.3s ease;\n  }\n\n  .sidebar-collapsed .sidebar-content,\n  .sidebar-collapsed .sidebar-footer {\n    padding-left: 0;\n    padding-right: 0;\n    align-items: center;\n  }\n\n  /* 折叠时隐藏文本和子菜单箭头的过渡 */\n  .nav-content,\n  .nav-text,\n  .nav-badge,\n  .submenu-arrow {\n    transition: opacity 0.15s ease;\n  }\n\n  /* 在折叠动画完成前，先降低文本透明度 */\n  .sidebar-collapsed .nav-text,\n  .sidebar-collapsed .nav-badge,\n  .sidebar-collapsed .submenu-arrow {\n    visibility: hidden;\n  }\n}\n\n/* 小屏时的样式 */\n@media (max-width: 1024px) {\n\n  .sidebar {\n    transform: translateX(-100%);\n    position: fixed;\n    top: var(--header-height);\n    left: 0;\n    bottom: 0;\n    width: 280px;\n    z-index: 40;\n    transition: transform 0.3s ease;\n  }\n\n  .sidebar.active {\n    transform: translateX(0);\n  }\n\n  .main-content {\n    margin-left: 0;\n    width: 100%;\n  }\n}\n\n/* 优化滚动条 */\n.sidebar::-webkit-scrollbar {\n  width: 4px;\n}\n\n.sidebar::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.sidebar::-webkit-scrollbar-thumb {\n  background: #E2E8F0;\n  border-radius: 2px;\n}\n\n.sidebar::-webkit-scrollbar-thumb:hover {\n  background: #CBD5E1;\n}\n\n/* 优化遮罩层 */\n.overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 30;\n  display: none;\n}\n\n/* 新的侧边栏样式 */\n.sidebar-header {\n  padding: 15px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.sidebar-logo {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.sidebar-logo i {\n  font-size: 20px;\n  color: #6366F1;\n}\n\n.sidebar-logo span {\n  font-size: 16px;\n  font-weight: 600;\n  white-space: nowrap;\n}\n\n.sidebar-content {\n  flex: 1;\n  overflow-y: auto;\n  padding: 20px 0 15px 0;\n}\n\n.sidebar-footer {\n  padding: 15px;\n  border-top: 1px solid #F1F5F9;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 70px;\n}\n\n.collapse-btn {\n  background: #F1F5F9;\n  border: none;\n  color: #64748B;\n  width: 40px;\n  height: 40px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n  overflow: hidden;\n}\n\n.collapse-btn::before {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 0;\n  height: 0;\n  background: #E2E8F0;\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n  transition: width 0.4s ease, height 0.4s ease;\n  z-index: -1;\n}\n\n.collapse-btn:hover {\n  background: #E2E8F0;\n  color: #334155;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n}\n\n.collapse-btn:hover::before {\n  width: 100px;\n  height: 100px;\n}\n\n.collapse-btn:active {\n  transform: translateY(0);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);\n}\n\n.collapse-btn i {\n  transition: transform 0.3s ease;\n}\n\n.nav-menu {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.nav-item {\n  margin: 6px 12px;\n  border-radius: 10px;\n  overflow: hidden;\n}\n\n.nav-link {\n  display: flex;\n  align-items: center;\n  padding: 14px 16px;\n  color: #64748B;\n  text-decoration: none;\n  transition: all 0.2s;\n  border-radius: 10px;\n  position: relative;\n}\n\n.nav-link:hover {\n  background: #F8FAFC;\n  color: #334155;\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n}\n\n.nav-item.active > .nav-link {\n  background: #EEF2FF;\n  color: #4F46E5;\n  box-shadow: 0 4px 12px rgba(79, 70, 229, 0.15);\n}\n\n.nav-icon {\n  min-width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 14px;\n  font-size: 18px;\n}\n\n.nav-content {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  overflow: hidden;\n  transition: width 0.3s ease;\n}\n\n.nav-text {\n  font-size: 15px;\n  font-weight: 500;\n  white-space: nowrap;\n  opacity: 1;\n  transition: opacity 0.2s ease;\n}\n\n.sidebar-collapsed .nav-text {\n  opacity: 0;\n}\n\n.nav-badge {\n  font-size: 11px;\n  font-weight: 600;\n  color: #F9FAFB;\n  background: #F43F5E;\n  padding: 2px 6px;\n  border-radius: 10px;\n  display: inline-block;\n  margin-top: 2px;\n  align-self: flex-start;\n  white-space: nowrap;\n  opacity: 1;\n  transition: opacity 0.2s ease;\n}\n\n.sidebar-collapsed .nav-badge {\n  opacity: 0;\n}\n\n.submenu-arrow {\n  font-size: 12px;\n  opacity: 0.7;\n  transition: all 0.3s ease, opacity 0.2s ease;\n}\n\n.sidebar-collapsed .submenu-arrow {\n  opacity: 0;\n  visibility: hidden;\n}\n\n.submenu-arrow.expanded {\n  transform: rotate(90deg);\n}\n\n.nav-link.has-arrow {\n  position: relative;\n  overflow: hidden;\n}\n\n.nav-link.has-arrow::before {\n  content: '';\n  position: absolute;\n  left: 0;\n  top: 0;\n  height: 100%;\n  width: 3px;\n  background: transparent;\n  transition: all 0.2s ease;\n}\n\n.nav-item.active .nav-link.has-arrow::before {\n  background: #4F46E5;\n}\n\n.submenu {\n  list-style: none;\n  padding: 8px 0;\n  margin: 3px 0 3px 36px;\n  background: #F8FAFC;\n  border-radius: 8px;\n  position: relative;\n  border: 1px solid #F1F5F9;\n}\n\n.submenu::before {\n  content: '';\n  position: absolute;\n  left: -18px;\n  top: 0;\n  bottom: 0;\n  width: 2px;\n  background: #E2E8F0;\n}\n\n.submenu-item {\n  margin: 4px 8px;\n}\n\n.submenu-link {\n  display: flex;\n  align-items: center;\n  padding: 10px 14px;\n  color: #64748B;\n  text-decoration: none;\n  font-size: 14px;\n  border-radius: 8px;\n  transition: all 0.2s;\n}\n\n.submenu-link:hover {\n  background: #F1F5F9;\n  color: #334155;\n}\n\n.submenu-item.active .submenu-link {\n  color: #4F46E5;\n  background: #EEF2FF;\n  font-weight: 500;\n  box-shadow: 0 2px 8px rgba(79, 70, 229, 0.1);\n}\n\n.submenu-link i {\n  font-size: 14px;\n  margin-right: 10px;\n  width: 16px;\n  text-align: center;\n}\n\n.submenu-enter-active, \n.submenu-leave-active {\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  max-height: 300px;\n  overflow: hidden;\n  opacity: 1;\n  transform-origin: top;\n}\n\n/* 侧边栏折叠过渡控制 */\n.sidebar-collapsing .nav-text,\n.sidebar-collapsing .nav-badge,\n.sidebar-collapsing .submenu-arrow {\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity 0.1s ease, visibility 0.1s ease;\n}\n\n/* 确保文本内容在折叠前就隐藏，避免视觉跳动 */\n.sidebar-collapsing .nav-content {\n  overflow: hidden;\n  transition: width 0.1s ease;\n}\n\n/* 折叠与展开时的性能优化 */\n.sidebar,\n.main-content {\n  backface-visibility: hidden;\n  -webkit-font-smoothing: subpixel-antialiased;\n}\n\n.submenu-enter {\n  max-height: 0;\n  opacity: 0;\n  transform: scaleY(0.8);\n}\n\n.submenu-leave-to {\n  max-height: 0;\n  opacity: 0;\n  transform: scaleY(0.8);\n}\n\n/* 侧边栏折叠时的样式 */\n.sidebar-collapsed .nav-item {\n  margin: 6px 4px;\n}\n\n.sidebar-collapsed .nav-link {\n  justify-content: center;\n  padding: 14px 8px;\n}\n\n.sidebar-collapsed .nav-icon {\n  margin-right: 0;\n  font-size: 20px;\n  transition: margin-right 0.3s ease, font-size 0.3s ease;\n}\n\n.nav-icon {\n  transition: margin-right 0.3s ease, font-size 0.3s ease;\n}\n\n.sidebar-collapsed .submenu {\n  position: absolute;\n  left: 68px;\n  top: 0;\n  margin: 0;\n  width: 180px;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);\n  z-index: 100;\n  border-radius: 8px;\n  background: #FFFFFF;\n  border: 1px solid #F1F5F9;\n}\n\n.sidebar-collapsed .nav-item.has-children {\n  position: relative;\n}\n\n/* 移动端适配 */\n@media (max-width: 768px) {\n  .sidebar {\n    width: 260px;\n  }\n  \n  .nav-link {\n    padding: 10px 14px;\n  }\n  \n  .submenu {\n    margin-left: 30px;\n  }\n}\n\n/* 优化用户信息和登出按钮 */\n.user-info {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem;\n  border-radius: var(--radius);\n  background: var(--background-color);\n}\n\n.btn-logout {\n  padding: 0.5rem 1rem;\n  border: none;\n  border-radius: var(--radius);\n  background: var(--danger-gradient);\n  color: white;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  transition: var(--transition);\n  font-weight: 500;\n}\n\n.btn-logout:hover {\n  opacity: 0.9;\n  transform: translateY(-1px);\n  box-shadow: var(--shadow-sm);\n}\n\n/* 移动端优化 */\n@media (max-width: 768px) {\n  .header {\n    padding: 0.75rem;\n    height: 56px;\n  }\n\n  .header-left h1 {\n    font-size: 1rem;\n    max-width: 180px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n\n  .sidebar {\n    width: 85%;\n    max-width: 280px;\n    top: 56px;\n    height: calc(100vh - 56px);\n  }\n\n  .main-content {\n    padding: 0.5rem;\n    margin-top: 56px;\n  }\n\n  .content-wrapper {\n    padding: 0.75rem;\n    border-radius: 8px;\n    margin: 0;\n  }\n\n  /* 优化侧边栏项目 */\n  .sidebar ul li a {\n    padding: 0.75rem 1rem;\n    margin: 0.125rem 0.5rem;\n  }\n\n  .sidebar ul li a i {\n    font-size: 1.125rem;\n  }\n\n  /* 优化用户信息和登出按钮 */\n  .user-info {\n    display: none;\n  }\n\n  .btn-logout {\n    padding: 0.5rem;\n    min-width: 36px;\n    justify-content: center;\n  }\n\n  .btn-logout span {\n    display: none;\n  }\n\n  /* 优化遮罩层 */\n  .overlay {\n    backdrop-filter: blur(3px);\n  }\n}\n\n/* 添加安全区域适配 */\n@supports (padding: max(0px)) {\n  .header {\n    padding-left: max(0.75rem, env(safe-area-inset-left));\n    padding-right: max(0.75rem, env(safe-area-inset-right));\n  }\n\n  .content-wrapper {\n    padding-bottom: max(0.75rem, env(safe-area-inset-bottom));\n  }\n}\n\n/* 优化触摸交互 */\n@media (hover: none) {\n  .sidebar ul li a {\n    min-height: 44px;\n  }\n\n  .btn-logout {\n    min-height: 44px;\n  }\n\n  .menu-toggle {\n    min-width: 44px;\n    min-height: 44px;\n  }\n}\n\n/* 小屏幕优化 */\n@media (max-width: 480px) {\n  .header {\n    padding: 0.5rem;\n  }\n\n  .content-wrapper {\n    padding: 0.75rem;\n  }\n\n  .main-content {\n    padding: 0.25rem;\n  }\n}\n\n/* 添加聊天组样式 */\n.chat-widget {\n  position: fixed;\n  right: 24px;\n  bottom: 24px;\n  z-index: 1000;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n}\n\n/* 触发按钮样式 */\n.chat-trigger {\n  background: linear-gradient(135deg, #4F46E5 0%, #6366F1 100%);\n  border-radius: 16px;\n  padding: 12px 24px;\n  cursor: pointer;\n  box-shadow: 0 8px 24px rgba(99, 102, 241, 0.25);\n  transition: all 0.3s ease;\n}\n\n.chat-trigger:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 12px 28px rgba(99, 102, 241, 0.3);\n}\n\n.trigger-content {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  color: white;\n}\n\n.trigger-icon {\n  position: relative;\n  font-size: 24px;\n}\n\n.trigger-text {\n  font-weight: 500;\n  font-size: 15px;\n}\n\n.unread-badge {\n  position: absolute;\n  top: -8px;\n  right: -8px;\n  background: #EF4444;\n  color: white;\n  font-size: 12px;\n  padding: 2px 8px;\n  border-radius: 10px;\n  font-weight: 600;\n  box-shadow: 0 2px 4px rgba(239, 68, 68, 0.2);\n}\n\n/* 聊天面板样式 */\n.chat-panel {\n  position: absolute;\n  bottom: calc(100% + 16px);\n  right: 0;\n  width: 720px;\n  height: 600px;\n  background: white;\n  border-radius: 20px;\n  box-shadow: 0 12px 28px rgba(0, 0, 0, 0.15);\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.panel-header {\n  padding: 20px;\n  background: linear-gradient(135deg, #4F46E5 0%, #6366F1 100%);\n  color: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.header-info {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.header-info i {\n  font-size: 24px;\n  background: rgba(255, 255, 255, 0.2);\n  padding: 10px;\n  border-radius: 12px;\n}\n\n.header-text h3 {\n  margin: 0;\n  font-size: 16px;\n  font-weight: 600;\n}\n\n.header-subtitle {\n  font-size: 13px;\n  opacity: 0.8;\n}\n\n.header-actions {\n  display: flex;\n  gap: 8px;\n}\n\n.action-btn {\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  color: white;\n  width: 36px;\n  height: 36px;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.action-btn:hover {\n  background: rgba(255, 255, 255, 0.3);\n  transform: translateY(-1px);\n}\n\n.panel-content {\n  display: flex;\n  flex: 1;\n  overflow: hidden;\n}\n\n/* 订单列表样式 */\n.orders-list {\n  width: 280px;\n  border-right: 1px solid #E5E7EB;\n  overflow-y: auto;\n  background: #F9FAFB;\n}\n\n.order-card {\n  padding: 16px;\n  background: white;\n  border-bottom: 1px solid #E5E7EB;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.order-card:hover {\n  background: #F3F4F6;\n  transform: translateX(2px);\n}\n\n.order-card.active {\n  background: #EEF2FF;\n  border-left: 4px solid #6366F1;\n}\n\n.order-card.has-unread {\n  background: rgba(239, 68, 68, 0.05);\n}\n\n.order-main {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.order-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.order-id {\n  font-weight: 600;\n  color: #1F2937;\n}\n\n.order-amount {\n  color: #059669;\n  font-weight: 700;\n}\n\n.order-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.order-time {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  color: #6B7280;\n  font-size: 12px;\n}\n\n.unread-count {\n  font-size: 12px;\n  color: #EF4444;\n  font-weight: 500;\n}\n\n/* 聊天区域样式 */\n.chat-area {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  background: #F9FAFB;\n}\n\n.chat-messages {\n  flex: 1;\n  padding: 20px;\n  overflow-y: auto;\n}\n\n.message {\n  margin-bottom: 16px;\n  display: flex;\n}\n\n.message.sent {\n  justify-content: flex-end;\n}\n\n.message-bubble {\n  max-width: 80%;\n  padding: 12px 16px;\n  border-radius: 16px;\n  background: white;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n}\n\n.sent .message-bubble {\n  background: linear-gradient(135deg, #4F46E5 0%, #6366F1 100%);\n  color: white;\n}\n\n.message-content {\n  font-size: 14px;\n  line-height: 1.5;\n}\n\n.message-time {\n  font-size: 12px;\n  color: #9CA3AF;\n  margin-top: 4px;\n}\n\n.sent .message-time {\n  color: rgba(255, 255, 255, 0.8);\n}\n\n/* 输入区域样式 */\n.chat-composer {\n  padding: 16px;\n  background: white;\n  border-top: 1px solid #E5E7EB;\n}\n\n.composer-tools {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 8px;\n}\n\n.tool-btn {\n  padding: 8px;\n  background: transparent;\n  border: none;\n  color: #6B7280;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.tool-btn:hover {\n  background: #F3F4F6;\n  color: #4F46E5;\n}\n\n.composer-input {\n  display: flex;\n  gap: 12px;\n}\n\n.composer-input input {\n  flex: 1;\n  padding: 12px 16px;\n  border: 2px solid #E5E7EB;\n  border-radius: 24px;\n  font-size: 14px;\n  transition: all 0.2s;\n}\n\n.composer-input input:focus {\n  outline: none;\n  border-color: #6366F1;\n  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);\n}\n\n.send-btn {\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  border: none;\n  background: linear-gradient(135deg, #4F46E5 0%, #6366F1 100%);\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.send-btn:not(:disabled):hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);\n}\n\n.send-btn:disabled {\n  background: #E5E7EB;\n  cursor: not-allowed;\n}\n\n/* 空状态样式 */\n.empty-state {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 40px;\n  color: #6B7280;\n  text-align: center;\n}\n\n.empty-icon {\n  font-size: 48px;\n  color: #E5E7EB;\n  margin-bottom: 16px;\n}\n\n.empty-state h3 {\n  margin: 0 0 8px;\n  color: #374151;\n  font-weight: 600;\n}\n\n.empty-state p {\n  margin: 0;\n  font-size: 14px;\n}\n\n/* 自定义滚动条 */\n.custom-scrollbar::-webkit-scrollbar {\n  width: 4px;\n}\n\n.custom-scrollbar::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.custom-scrollbar::-webkit-scrollbar-thumb {\n  background: #D1D5DB;\n  border-radius: 4px;\n}\n\n.custom-scrollbar:hover::-webkit-scrollbar-thumb {\n  background: #9CA3AF;\n}\n\n/* 动画 */\n.slide-up-enter-active,\n.slide-up-leave-active {\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.slide-up-enter,\n.slide-up-leave-to {\n  opacity: 0;\n  transform: translateY(20px);\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .chat-panel {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n    height: 100%;\n    border-radius: 0;\n  }\n\n  .panel-content {\n    flex-direction: column;\n  }\n\n  .orders-list {\n    width: 100%;\n    height: 35%;\n  }\n\n  .chat-area {\n    height: 65%;\n  }\n}\n\n.global-notifications {\n  position: fixed;\n  top: 80px;\n  right: 20px;\n  z-index: 10000;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  max-width: 400px;\n  pointer-events: none;\n}\n\n.notification-item {\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  overflow: hidden;\n  pointer-events: auto;\n  cursor: pointer;\n  transition: transform 0.2s;\n  opacity: 1;\n  transform: translateX(0);\n}\n\n.notification-item:hover {\n  transform: translateY(-2px);\n}\n\n.notification-content {\n  padding: 15px;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.notification-content i {\n  color: #6366F1;\n  font-size: 20px;\n}\n\n.notification-text {\n  flex: 1;\n}\n\n.notification-title {\n  font-weight: 600;\n  color: #1F2937;\n  margin-bottom: 4px;\n}\n\n.notification-message {\n  color: #6B7280;\n  font-size: 14px;\n}\n\n.close-btn {\n  background: none;\n  border: none;\n  color: #9CA3AF;\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 4px;\n}\n\n.close-btn:hover {\n  background: #F3F4F6;\n  color: #4B5563;\n}\n\n@keyframes slideIn {\n  from {\n    opacity: 0;\n    transform: translateX(100%);\n  }\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n\n/* 移动端适配 */\n@media (max-width: 768px) {\n  .global-notifications {\n    top: 70px;\n    right: 10px;\n    left: 10px;\n    max-width: none;\n  }\n}\n\n/* 添加通知动画 */\n.notification-enter-active, \n.notification-leave-active {\n  transition: all 0.3s ease;\n}\n\n.notification-enter {\n  transform: translateX(100%);\n  opacity: 0;\n}\n\n.notification-leave-to {\n  transform: translateX(100%);\n  opacity: 0;\n}\n\n.notification-move {\n  transition: transform 0.3s ease;\n}\n</style>\n\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=57f65ed8&scoped=true\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=57f65ed8&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57f65ed8\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=57f65ed8&prod&scoped=true&lang=css\""],"sourceRoot":""}