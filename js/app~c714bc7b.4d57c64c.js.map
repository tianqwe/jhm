{"version":3,"sources":["webpack:///./src/socket.js","webpack:///./src/views/BalanceChange.vue?4d05","webpack:///./src/services/api.js","webpack:///./src/views/ChannelMarket.vue?8152","webpack:///./src/store/domain.js","webpack:///./src/router/paymentRoutes.js","webpack:///./src/views/ChannelMarket.vue","webpack:///src/views/ChannelMarket.vue","webpack:///./src/views/ChannelMarket.vue?4121","webpack:///./src/views/ChannelMarket.vue?e71b","webpack:///./src/views/BalanceChange.vue","webpack:///src/views/BalanceChange.vue","webpack:///./src/views/BalanceChange.vue?ddd9","webpack:///./src/views/BalanceChange.vue?1d6c","webpack:///./src/router/index.js"],"names":["SocketService","constructor","this","socket","connected","reconnecting","reconnectAttempts","connect","socketURL","process","io","autoConnect","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","timeout","transports","path","setupListeners","on","console","log","error","attemptNumber","emit","event","data","callback","off","joinChat","room","orderId","leaveChat","emitF2fPayment","payUrl","disconnect","api","axios","create","baseURL","headers","withCredentials","interceptors","request","use","config","token","localStorage","getItem","Authorization","startsWith","Promise","reject","response","url","includes","status","success","message","_error$response$data","_error$response$data3","code","errorResponse","errorMessage","statusText","shouldRelogin","_error$response$data2","removeItem","currentPath","window","location","pathname","setItem","router","replace","errorObj","type","useDomainStore","defineStore","state","domains","actions","get","name","post","fetchDomains","id","delete","paymentRoutes","component","PaymentPage","meta","requiresAuth","layout","render","_vm","_c","_self","staticClass","_v","attrs","loadStatistics","loading","_m","_s","totalChannels","activeChannels","formatAmount","todayAmount","staticRenderFns","components","ChannelTable","methods","amount","parseFloat","toFixed","$api","_error$response","initializeWebSocket","created","timer","setInterval","beforeDestroy","clearInterval","currentBalance","showRechargeDialog","_e","isMobile","_l","transactions","transaction","key","_id","class","getTypeClass","getAmountClass","formatDate","createdAt","balance","description","length","totalRecords","currentPage","totalPages","$event","changePage","displayedPages","pageNum","active","directives","rawName","value","pageSize","expression","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","multiple","handlePageSizeChange","pageSizes","size","domProps","showRechargeModal","closeRechargeModal","stopPropagation","rechargeForm","cardNo","composing","$set","isValidCardNo","rechargeLoading","confirmRecharge","computed","Math","ceil","current","delta","pages","left","max","right","min","push","i","$message","params","page","limit","Date","toLocaleString","total","loadTransactions","tableWrapper","$el","querySelector","scrollTop","date","$nextTick","input","document","focus","trim","all","loadBalance","checkMobile","innerWidth","addEventListener","removeEventListener","Vue","VueRouter","routes","Login","ChannelMarket","OrderQuery","BalanceChange","VoiceService","ToolDownload","requiresRole","beforeEnter","to","from","next","userRole","roles","mode","base","beforeEach","NProgress","start","isLoggedIn","matched","some","record","query","redirect","fullPath","afterEach","done","onError"],"mappings":"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","file":"js/app~c714bc7b.4d57c64c.js","sourcesContent":["import io from 'socket.io-client';\n\nclass SocketService {\n  constructor() {\n    this.socket = null;\n    this.connected = false;\n    this.reconnecting = false;\n    this.reconnectAttempts = 0;\n  }\n\n  connect() {\n    if (this.socket && this.connected) return;\n\n    const socketURL = process.env.VUE_APP_SOCKET_URL || (process.env.NODE_ENV === 'development'\n      ? `http://${process.env.LOCAL_IP}:3000`\n      : window.location.origin);\n\n    this.socket = io(socketURL, {\n      autoConnect: true,\n      reconnection: true,\n      reconnectionAttempts: Infinity,\n      reconnectionDelay: 1000,\n      reconnectionDelayMax: 5000,\n      timeout: 20000,\n      transports: ['websocket', 'polling'],\n      path: '/socket.io'\n    });\n\n    this.setupListeners();\n    return this.socket;\n  }\n\n  setupListeners() {\n    if (!this.socket) return;\n\n    this.socket.on('connect', () => {\n      console.log('Socket connected');\n      this.connected = true;\n      this.reconnecting = false;\n      this.reconnectAttempts = 0;\n    });\n\n    this.socket.on('disconnect', () => {\n      console.log('Socket disconnected');\n      this.connected = false;\n    });\n\n    this.socket.on('connect_error', (error) => {\n      console.error('Socket connection error:', error);\n      this.connected = false;\n    });\n\n    this.socket.on('reconnect', (attemptNumber) => {\n      console.log('Socket reconnected after', attemptNumber, 'attempts');\n      this.connected = true;\n      this.reconnecting = false;\n    });\n\n    this.socket.on('reconnect_attempt', () => {\n      this.reconnecting = true;\n      this.reconnectAttempts++;\n      console.log('Socket reconnection attempt:', this.reconnectAttempts);\n    });\n\n    this.socket.on('error', (error) => {\n      console.error('Socket error:', error);\n    });\n  }\n\n  emit(event, data) {\n    if (!this.socket) {\n      this.connect();\n    }\n    this.socket.emit(event, data);\n  }\n\n  on(event, callback) {\n    if (!this.socket) {\n      this.connect();\n    }\n    this.socket.on(event, callback);\n  }\n\n  off(event, callback) {\n    if (this.socket) {\n      this.socket.off(event, callback);\n    }\n  }\n\n  joinChat(data) {\n    if (!this.connected) {\n      this.connect();\n    }\n    \n    if (this.socket) {\n      const room = data.room || `order:${data.orderId}`;\n      this.socket.emit('join-chat', { room });\n      console.log('Joining chat room:', room);\n    } else {\n      console.error('Socket not initialized');\n    }\n  }\n\n  leaveChat(orderId) {\n    if (this.socket) {\n      this.socket.emit('leave-chat', orderId);\n    }\n  }\n\n  emitF2fPayment(data) {\n    if (!this.connected) {\n      this.connect();\n    }\n    \n    if (this.socket) {\n      this.socket.emit('f2f-payment-url', {\n        room: `order:${data.orderId}`,\n        data: {\n          orderId: data.orderId,\n          payUrl: data.payUrl\n        }\n      });\n      console.log('Emitted f2f payment:', data);\n    } else {\n      console.error('Socket not initialized');\n    }\n  }\n\n  disconnect() {\n    if (this.socket) {\n      this.socket.disconnect();\n      this.connected = false;\n    }\n  }\n}\n\nexport default new SocketService();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BalanceChange.vue?vue&type=style&index=0&id=0df92723&prod&scoped=true&lang=css\"","import axios from 'axios';\nimport router from '../router';\n\n// 创建 axios 实例\nconst api = axios.create({\n  baseURL: process.env.VUE_APP_API_BASE_URL || (process.env.NODE_ENV === 'development' \n     ? `http://${process.env.LOCAL_IP}:3000`\n    // ? '/'  //开发环境\n    // ? `http://${window.location.hostname}:3000`\n    : '/'),\n  timeout: 15000,\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  withCredentials: true\n});\n\n// 请求拦截器\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    // 检查token是否已经包含Bearer前缀\n    config.headers.Authorization = token.startsWith('Bearer ') \n      ? token \n      : `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// 响应拦截器\napi.interceptors.response.use(\n  response => {\n    // 处理注册成功的情况\n    if (response.config.url.includes('/auth/register') && response.status === 201) {\n      return response;\n    }\n\n    // 检查响应中是否包含 success 字段（登录请求）\n    if (response.data && typeof response.data.success !== 'undefined') {\n      if (!response.data.success) {\n        // 如果 success 为 false，将其转换为错误\n        return Promise.reject({\n          response,\n          message: response.data.message\n        });\n      }\n    }\n    return response;\n  },\n  error => {\n    console.error('API Error:', error.response || error);\n\n    if (!error.response) {\n      return Promise.reject({\n        message: '网络连接失败,请检查网络设置',\n        code: 'NETWORK_ERROR'\n      });\n    }\n\n    // 获取详细的错误信息\n    const errorResponse = error.response.data || {};\n    const errorMessage = errorResponse.message || \n                        errorResponse.error || \n                        error.message || \n                        '未知错误';\n    \n    // 打印完整的错误响应以便调试\n    console.log('Full error response:', {\n      status: error.response.status,\n      statusText: error.response.statusText,\n      data: error.response.data,\n      headers: error.response.headers,\n      config: error.response.config\n    });\n\n    // 检查是否需要重新登录\n    const shouldRelogin = error.response.data?.shouldRelogin === true || \n                         error.response.status === 401;\n\n    // 如果服务器明确指示需要重新登录\n    if (shouldRelogin) {\n      \n      // 清除所有登录状态\n      localStorage.removeItem('token');\n      localStorage.removeItem('isLoggedIn');\n      localStorage.removeItem('currentUserId');\n      localStorage.removeItem('userRole');\n      \n      // 保存当前URL，以便登录后返回\n      const currentPath = window.location.pathname;\n      if (currentPath !== '/' && currentPath !== '/login') {\n        localStorage.setItem('redirectAfterLogin', currentPath);\n      }\n      \n      // 使用 router 进行跳转，避免全页面刷新\n      router.replace('/login');\n      \n      return Promise.reject({\n        message: errorMessage || '登录已过期,请重新登录',\n        code: error.response.data?.code || 'AUTH_ERROR'\n      });\n    }\n\n    // 处理其他错误\n    const errorObj = {\n      message: errorMessage,\n      code: error.response.data?.code,\n      status: error.response.status\n    };\n\n    switch (error.response.status) {\n      case 400:\n        errorObj.type = 'VALIDATION_ERROR';\n        break;\n      case 403:\n        errorObj.type = 'PERMISSION_ERROR';\n        errorObj.message = errorMessage || '没有权限访问';\n        break;  \n      case 404:\n        errorObj.type = 'NOT_FOUND';\n        errorObj.message = errorMessage || '请求的资源不存在';\n        break;\n      case 500:\n        errorObj.type = 'SERVER_ERROR';\n        errorObj.message = errorMessage || '服务器内部错误';\n        break;\n      default:\n        errorObj.type = 'UNKNOWN_ERROR';\n    }\n    \n    return Promise.reject(errorObj);\n  }\n);\n\n// 导出 auth 相关的 API 方法\nexport const auth = {\n  login: (credentials) => {\n    return api.post('/api/auth/login', credentials);\n  },\n  register: (userData) => {\n    return api.post('/api/auth/register', userData);\n  }\n};\n\n// 21lili支付相关API\nexport const liliPay = {\n  // 创建支付订单\n  createOrder: (data) => {\n    return api.post('/api/lilipay/create', data);\n  },\n  \n  // 查询订单状态\n  queryOrder: (orderId) => {\n    return api.get(`/api/lilipay/query/${orderId}`);\n  }\n};\n\nexport default api;\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChannelMarket.vue?vue&type=style&index=0&id=6c234a22&prod&scoped=true&lang=css\"","import { defineStore } from 'pinia';\nimport api from '../services/api';\n\nexport const useDomainStore = defineStore('domain', {\n  state: () => ({\n    domains: [],\n  }),\n  actions: {\n    async fetchDomains() {\n      try {\n        const response = await api.get('/api/domains');\n        this.domains = response.data;\n      } catch (error) {\n        console.error('获取域名列表失败:', error);\n      }\n    },\n    async addDomain(name) {\n      try {\n        await api.post('/api/domains', { name });\n        await this.fetchDomains(); // Re-fetch to update the list\n      } catch (error) {\n        console.error('添加域名失败:', error);\n        throw error; // Re-throw to be caught in the component\n      }\n    },\n    async deleteDomain(id) {\n      try {\n        await api.delete(`/api/domains/${id}`);\n        await this.fetchDomains(); // Re-fetch to update the list\n      } catch (error) {\n        console.error('删除域名失败:', error);\n      }\n    },\n  },\n});\n","import PaymentPage from '@/components/PaymentPage.vue'\n\nexport const paymentRoutes = [\n  {\n    path: '/payment',\n    name: 'PaymentPage',\n    component: PaymentPage,\n    meta: { \n      requiresAuth: false,\n      layout: 'blank' // 使用空白布局\n    }\n  }\n]\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"channel-market\"},[_c('div',{staticClass:\"page-header\"},[_c('h1',{staticClass:\"page-title\"},[_vm._v(\"通道市场\")]),_c('div',{staticClass:\"page-actions\"},[_c('button',{staticClass:\"refresh-btn\",attrs:{\"title\":\"刷新数据\"},on:{\"click\":_vm.loadStatistics}},[_c('i',{staticClass:\"fas fa-sync-alt\"})])])]),(_vm.loading)?_c('div',{staticClass:\"loading-state\"},[_c('div',{staticClass:\"spinner\"}),_c('p',[_vm._v(\"正在加载通道数据...\")])]):(_vm.error)?_c('div',{staticClass:\"error-state\"},[_vm._m(0),_c('p',{staticClass:\"error-message\"},[_vm._v(_vm._s(_vm.error))]),_c('button',{staticClass:\"retry-btn\",on:{\"click\":_vm.loadStatistics}},[_vm._v(\"重试\")])]):_c('div',[_c('div',{staticClass:\"statistics-cards\"},[_c('div',{staticClass:\"stat-card\"},[_vm._m(1),_c('div',{staticClass:\"stat-content\"},[_c('div',{staticClass:\"stat-value\"},[_vm._v(_vm._s(_vm.totalChannels))]),_c('div',{staticClass:\"stat-label\"},[_vm._v(\"总通道数\")])]),_vm._m(2)]),_c('div',{staticClass:\"stat-card\"},[_vm._m(3),_c('div',{staticClass:\"stat-content\"},[_c('div',{staticClass:\"stat-value\"},[_vm._v(_vm._s(_vm.activeChannels))]),_c('div',{staticClass:\"stat-label\"},[_vm._v(\"活跃通道\")])]),_vm._m(4)]),_c('div',{staticClass:\"stat-card\"},[_vm._m(5),_c('div',{staticClass:\"stat-content\"},[_c('div',{staticClass:\"stat-value\"},[_vm._v(\"¥\"+_vm._s(_vm.formatAmount(_vm.todayAmount)))]),_c('div',{staticClass:\"stat-label\"},[_vm._v(\"今日交易额\")])]),_vm._m(6)])]),_c('div',{staticClass:\"channel-table-container\"},[_c('ChannelTable')],1)])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"error-icon\"},[_c('i',{staticClass:\"fas fa-exclamation-circle\"})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"stat-icon\"},[_c('i',{staticClass:\"fas fa-random\"})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"stat-trend\"},[_c('i',{staticClass:\"fas fa-chart-line\"})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"stat-icon active\"},[_c('i',{staticClass:\"fas fa-signal\"})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"stat-trend positive\"},[_c('i',{staticClass:\"fas fa-arrow-up\"})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"stat-icon money\"},[_c('i',{staticClass:\"fas fa-money-bill-wave\"})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"stat-trend positive\"},[_c('i',{staticClass:\"fas fa-arrow-up\"})])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"channel-market\">\n    <div class=\"page-header\">\n      <h1 class=\"page-title\">通道市场</h1>\n      <div class=\"page-actions\">\n        <button class=\"refresh-btn\" @click=\"loadStatistics\" title=\"刷新数据\">\n          <i class=\"fas fa-sync-alt\"></i>\n        </button>\n      </div>\n    </div>\n    \n    <!-- 添加加载状态和错误提示 -->\n    <div v-if=\"loading\" class=\"loading-state\">\n      <div class=\"spinner\"></div>\n      <p>正在加载通道数据...</p>\n    </div>\n    \n    <div v-else-if=\"error\" class=\"error-state\">\n      <div class=\"error-icon\">\n        <i class=\"fas fa-exclamation-circle\"></i>\n      </div>\n      <p class=\"error-message\">{{ error }}</p>\n      <button @click=\"loadStatistics\" class=\"retry-btn\">重试</button>\n    </div>\n    \n    <div v-else>\n      <!-- 卡片式统计信息 -->\n      <div class=\"statistics-cards\">\n        <div class=\"stat-card\">\n          <div class=\"stat-icon\">\n            <i class=\"fas fa-random\"></i>\n          </div>\n          <div class=\"stat-content\">\n            <div class=\"stat-value\">{{ totalChannels }}</div>\n            <div class=\"stat-label\">总通道数</div>\n          </div>\n          <div class=\"stat-trend\">\n            <i class=\"fas fa-chart-line\"></i>\n          </div>\n        </div>\n        \n        <div class=\"stat-card\">\n          <div class=\"stat-icon active\">\n            <i class=\"fas fa-signal\"></i>\n          </div>\n          <div class=\"stat-content\">\n            <div class=\"stat-value\">{{ activeChannels }}</div>\n            <div class=\"stat-label\">活跃通道</div>\n          </div>\n          <div class=\"stat-trend positive\">\n            <i class=\"fas fa-arrow-up\"></i>\n          </div>\n        </div>\n        \n        <div class=\"stat-card\">\n          <div class=\"stat-icon money\">\n            <i class=\"fas fa-money-bill-wave\"></i>\n          </div>\n          <div class=\"stat-content\">\n            <div class=\"stat-value\">¥{{ formatAmount(todayAmount) }}</div>\n            <div class=\"stat-label\">今日交易额</div>\n          </div>\n          <div class=\"stat-trend positive\">\n            <i class=\"fas fa-arrow-up\"></i>\n          </div>\n        </div>\n      </div>\n      \n      <!-- 通道列表 -->\n      <div class=\"channel-table-container\">\n        <ChannelTable />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ChannelTable from '@/components/ChannelTable.vue'\nimport io from 'socket.io-client'\n\nexport default {\n  name: 'ChannelMarket',\n  components: {\n    ChannelTable\n  },\n  data() {\n    return {\n      totalChannels: 0,\n      activeChannels: 0,\n      todayAmount: 0,\n      loading: false,\n      error: null,\n      socket: null\n    }\n  },\n  methods: {\n    formatAmount(amount) {\n      return parseFloat(amount).toFixed(2)\n    },\n    async loadStatistics() {\n      try {\n        this.loading = true;\n        this.error = null;\n        \n        const response = await this.$api.get('/api/channels/statistics');\n        const { totalChannels, activeChannels, todayAmount } = response.data;\n        \n        this.totalChannels = totalChannels;\n        this.activeChannels = activeChannels;\n        this.todayAmount = todayAmount;\n      } catch (error) {\n        this.error = error.response?.data?.message || '加载统计数据失败，请重试';\n      } finally {\n        this.loading = false;\n      }\n    },\n    initializeWebSocket() {\n      this.socket = io(process.env.VUE_APP_API_URL || 'http://localhost:3000');\n      this.socket.on('orderUpdate', () => {\n        this.loadStatistics();\n      });\n      this.socket.on('channelUpdate', () => {\n        this.loadStatistics();\n      });\n    }\n  },\n  created() {\n    this.loadStatistics();\n    this.initializeWebSocket();\n    // 保留定时刷新作为备份\n    this.timer = setInterval(this.loadStatistics, 60000);\n  },\n  beforeDestroy() {\n    if (this.timer) {\n      clearInterval(this.timer);\n    }\n    // 断开WebSocket连接\n    if (this.socket) {\n      this.socket.disconnect();\n    }\n  }\n}\n</script>\n\n<style scoped>\n.channel-market {\n  padding: 0 1rem;\n}\n\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 1px solid #F1F5F9;\n}\n\n.page-title {\n  font-size: 1.75rem;\n  font-weight: 700;\n  color: #1F2937;\n  margin: 0;\n}\n\n.page-actions {\n  display: flex;\n  gap: 0.75rem;\n}\n\n.refresh-btn {\n  background: #F9FAFB;\n  border: 1px solid #E5E7EB;\n  width: 40px;\n  height: 40px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #6B7280;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.refresh-btn:hover {\n  background: #F3F4F6;\n  color: #4F46E5;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n}\n\n.refresh-btn:active {\n  transform: translateY(0);\n}\n\n.refresh-btn i {\n  font-size: 1rem;\n}\n\n/* 统计卡片样式 */\n.statistics-cards {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n  gap: 1.5rem;\n  margin-bottom: 2rem;\n}\n\n.stat-card {\n  background: white;\n  border-radius: 16px;\n  padding: 1.5rem;\n  display: flex;\n  align-items: center;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n  transition: all 0.3s ease;\n  border: 1px solid #F1F5F9;\n  position: relative;\n  overflow: hidden;\n}\n\n.stat-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);\n}\n\n.stat-card::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 4px;\n  background: linear-gradient(90deg, #4F46E5, #6366F1);\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n\n.stat-card:hover::before {\n  opacity: 1;\n}\n\n.stat-icon {\n  width: 56px;\n  height: 56px;\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 1.25rem;\n  background: linear-gradient(135deg, #A5B4FC, #818CF8);\n  color: white;\n  font-size: 1.5rem;\n  flex-shrink: 0;\n}\n\n.stat-icon.active {\n  background: linear-gradient(135deg, #60A5FA, #3B82F6);\n}\n\n.stat-icon.money {\n  background: linear-gradient(135deg, #34D399, #10B981);\n}\n\n.stat-content {\n  flex: 1;\n}\n\n.stat-value {\n  font-size: 1.75rem;\n  font-weight: 700;\n  color: #1F2937;\n  margin-bottom: 0.25rem;\n}\n\n.stat-label {\n  font-size: 0.875rem;\n  color: #6B7280;\n  font-weight: 500;\n}\n\n.stat-trend {\n  padding: 0.5rem;\n  border-radius: 50%;\n  background: #F3F4F6;\n  color: #9CA3AF;\n  font-size: 0.875rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-left: 1rem;\n}\n\n.stat-trend.positive {\n  background: #ECFDF5;\n  color: #10B981;\n}\n\n.stat-trend.negative {\n  background: #FEF2F2;\n  color: #EF4444;\n}\n\n/* 加载状态 */\n.loading-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 4rem 2rem;\n  background: white;\n  border-radius: 16px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n  text-align: center;\n}\n\n.spinner {\n  width: 48px;\n  height: 48px;\n  border: 3px solid #E5E7EB;\n  border-top: 3px solid #4F46E5;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin-bottom: 1rem;\n}\n\n.loading-state p {\n  color: #6B7280;\n  font-size: 1rem;\n  margin: 0;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n/* 错误状态 */\n.error-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 4rem 2rem;\n  background: white;\n  border-radius: 16px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n  text-align: center;\n}\n\n.error-icon {\n  font-size: 3rem;\n  color: #EF4444;\n  margin-bottom: 1rem;\n}\n\n.error-message {\n  color: #4B5563;\n  font-size: 1rem;\n  margin-bottom: 1.5rem;\n}\n\n.retry-btn {\n  padding: 0.75rem 1.5rem;\n  background: #4F46E5;\n  color: white;\n  border: none;\n  border-radius: 8px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.retry-btn:hover {\n  background: #4338CA;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(79, 70, 229, 0.2);\n}\n\n.retry-btn:active {\n  transform: translateY(0);\n}\n\n.channel-table-container {\n  margin-bottom: 2rem;\n}\n\n/* 响应式调整 */\n@media (max-width: 768px) {\n  .page-header {\n    margin-bottom: 1.5rem;\n  }\n  \n  .page-title {\n    font-size: 1.5rem;\n  }\n  \n  .statistics-cards {\n    grid-template-columns: 1fr;\n    gap: 1rem;\n  }\n  \n  .stat-card {\n    padding: 1.25rem;\n  }\n  \n  .stat-icon {\n    width: 48px;\n    height: 48px;\n    font-size: 1.25rem;\n    margin-right: 1rem;\n  }\n  \n  .stat-value {\n    font-size: 1.5rem;\n  }\n  \n  .loading-state,\n  .error-state {\n    padding: 3rem 1.5rem;\n  }\n}\n</style>\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChannelMarket.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChannelMarket.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChannelMarket.vue?vue&type=template&id=6c234a22&scoped=true\"\nimport script from \"./ChannelMarket.vue?vue&type=script&lang=js\"\nexport * from \"./ChannelMarket.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChannelMarket.vue?vue&type=style&index=0&id=6c234a22&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c234a22\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"balance-page\"},[_c('div',{staticClass:\"balance-card\"},[_c('div',{staticClass:\"balance-info\"},[_c('div',{staticClass:\"balance-title\"},[_vm._v(\"当前余额\")]),_c('div',{staticClass:\"amount\"},[_vm._v(\"¥ \"+_vm._s(_vm.formatAmount(_vm.currentBalance)))])]),_c('div',{staticClass:\"balance-actions\"},[_c('button',{staticClass:\"btn-recharge\",on:{\"click\":_vm.showRechargeDialog}},[_c('i',{staticClass:\"fas fa-ticket-alt\"}),_vm._v(\" 卡密充值 \")])])]),_c('div',{staticClass:\"transactions-section\"},[_c('div',{staticClass:\"section-header\"},[_c('h3',[_vm._v(\"交易记录\")]),(_vm.loading)?_c('div',{staticClass:\"loading-indicator\"},[_c('i',{staticClass:\"fas fa-circle-notch fa-spin\"}),_vm._v(\" 加载中 \")]):_vm._e()]),(!_vm.isMobile)?_c('div',{staticClass:\"table-container\"},[_c('div',{staticClass:\"table-wrapper\"},[(_vm.transactions.length > 0)?_c('table',[_vm._m(0),_c('tbody',_vm._l((_vm.transactions),function(transaction){return _c('tr',{key:transaction._id},[_c('td',{staticClass:\"time-cell\"},[_vm._v(_vm._s(_vm.formatDate(transaction.createdAt)))]),_c('td',[_c('span',{staticClass:\"transaction-type\",class:_vm.getTypeClass(transaction.type)},[_vm._v(\" \"+_vm._s(transaction.type)+\" \")])]),_c('td',{staticClass:\"amount-cell\",class:_vm.getAmountClass(transaction.amount)},[_vm._v(\" \"+_vm._s(_vm.formatAmount(transaction.amount))+\" \")]),_c('td',{staticClass:\"balance-cell\"},[_vm._v(_vm._s(_vm.formatAmount(transaction.balance)))]),_c('td',{staticClass:\"description-cell\"},[_vm._v(_vm._s(transaction.description || '-'))])])}),0)]):_vm._e()])]):_c('div',{staticClass:\"mobile-transactions\"},[_c('transition-group',{staticClass:\"transaction-list\",attrs:{\"name\":\"list\",\"tag\":\"div\"}},_vm._l((_vm.transactions),function(transaction){return _c('div',{key:transaction._id,staticClass:\"transaction-card\"},[_c('div',{staticClass:\"card-header\"},[_c('span',{staticClass:\"transaction-type\",class:_vm.getTypeClass(transaction.type)},[_vm._v(\" \"+_vm._s(transaction.type)+\" \")]),_c('span',{class:_vm.getAmountClass(transaction.amount)},[_vm._v(\" \"+_vm._s(_vm.formatAmount(transaction.amount))+\" \")])]),_c('div',{staticClass:\"card-body\"},[_c('div',{staticClass:\"info-row\"},[_c('span',{staticClass:\"label\"},[_c('i',{staticClass:\"far fa-clock\"}),_vm._v(\" 时间:\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.formatDate(transaction.createdAt)))])]),_c('div',{staticClass:\"info-row\"},[_c('span',{staticClass:\"label\"},[_c('i',{staticClass:\"fas fa-wallet\"}),_vm._v(\" 余额:\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(_vm.formatAmount(transaction.balance)))])]),_c('div',{staticClass:\"info-row\"},[_c('span',{staticClass:\"label\"},[_c('i',{staticClass:\"fas fa-comment-alt\"}),_vm._v(\" 说明:\")]),_c('span',{staticClass:\"value\"},[_vm._v(_vm._s(transaction.description || '-'))])])])])}),0)],1),(_vm.transactions.length > 0)?_c('div',{staticClass:\"pagination\"},[_c('div',{staticClass:\"pagination-info\"},[_vm._v(\" 共 \"),_c('span',{staticClass:\"text-primary\"},[_vm._v(_vm._s(_vm.totalRecords))]),_vm._v(\" 条记录，当前第 \"),_c('span',{staticClass:\"text-primary\"},[_vm._v(_vm._s(_vm.currentPage))]),_vm._v(\"/\"),_c('span',[_vm._v(_vm._s(_vm.totalPages))]),_vm._v(\" 页 \")]),_c('div',{staticClass:\"pagination-controls\"},[_c('button',{staticClass:\"nav-btn prev-btn\",attrs:{\"disabled\":_vm.currentPage === 1},on:{\"click\":function($event){return _vm.changePage(_vm.currentPage - 1)}}},[_c('i',{staticClass:\"fas fa-chevron-left\"}),_c('span',[_vm._v(\"上一页\")])]),_c('div',{staticClass:\"page-numbers\"},[_vm._l((_vm.displayedPages),function(pageNum){return [(pageNum === '...')?_c('span',{key:'ellipsis-' + pageNum,staticClass:\"ellipsis\"},[_vm._v(\"...\")]):_c('button',{key:pageNum,staticClass:\"page-num-btn\",class:{ active: _vm.currentPage === pageNum },on:{\"click\":function($event){return _vm.changePage(pageNum)}}},[_vm._v(\" \"+_vm._s(pageNum)+\" \")])]})],2),_c('button',{staticClass:\"nav-btn next-btn\",attrs:{\"disabled\":_vm.currentPage === _vm.totalPages},on:{\"click\":function($event){return _vm.changePage(_vm.currentPage + 1)}}},[_c('span',[_vm._v(\"下一页\")]),_c('i',{staticClass:\"fas fa-chevron-right\"})])]),_c('div',{staticClass:\"page-size-selector\"},[_c('span',[_vm._v(\"每页\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.pageSize),expression:\"pageSize\"}],on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.pageSize=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},_vm.handlePageSizeChange]}},_vm._l((_vm.pageSizes),function(size){return _c('option',{key:size,domProps:{\"value\":size}},[_vm._v(\" \"+_vm._s(size)+\" \")])}),0),_c('span',[_vm._v(\"条\")])])]):_vm._e(),(_vm.transactions.length === 0 && !_vm.loading)?_c('div',{staticClass:\"no-data\"},[_vm._m(1)]):_vm._e()]),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.showRechargeModal)?_c('div',{staticClass:\"modal-overlay\",on:{\"click\":_vm.closeRechargeModal}},[_c('div',{staticClass:\"modal\",on:{\"click\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"modal-header\"},[_c('h3',[_c('i',{staticClass:\"fas fa-ticket-alt\"}),_vm._v(\" 卡密充值\")]),_c('button',{staticClass:\"close-btn\",on:{\"click\":_vm.closeRechargeModal}},[_c('i',{staticClass:\"fas fa-times\"})])]),_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"input-group\"},[_c('label',{attrs:{\"for\":\"card-input\"}},[_vm._v(\"充值卡密\")]),_c('div',{staticClass:\"input-wrapper\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.rechargeForm.cardNo),expression:\"rechargeForm.cardNo\"}],staticClass:\"card-input\",attrs:{\"id\":\"card-input\",\"type\":\"text\",\"placeholder\":\"请输入16位充值卡密\",\"maxlength\":\"16\"},domProps:{\"value\":(_vm.rechargeForm.cardNo)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.rechargeForm, \"cardNo\", $event.target.value)}}}),_c('div',{staticClass:\"input-status\",class:{'valid': _vm.isValidCardNo && _vm.rechargeForm.cardNo}},[_c('i',{staticClass:\"fas\",class:_vm.isValidCardNo && _vm.rechargeForm.cardNo ? 'fa-check-circle' : 'fa-exclamation-circle'})])])]),_c('div',{staticClass:\"tips\"},[_c('i',{staticClass:\"fas fa-info-circle\"}),_c('span',[_vm._v(\"请输入16位充值卡密，充值成功后余额将立即到账\")])])]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{staticClass:\"cancel-btn\",on:{\"click\":_vm.closeRechargeModal}},[_c('i',{staticClass:\"fas fa-times\"}),_vm._v(\" 取消 \")]),_c('button',{staticClass:\"confirm-btn\",attrs:{\"disabled\":!_vm.isValidCardNo || _vm.rechargeLoading},on:{\"click\":_vm.confirmRecharge}},[(!_vm.rechargeLoading)?[_c('i',{staticClass:\"fas fa-check\"}),_vm._v(\" 确认充值 \")]:[_c('i',{staticClass:\"fas fa-spinner fa-spin\"}),_vm._v(\" 充值中... \")]],2)])])]):_vm._e()])],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('thead',[_c('tr',[_c('th',[_vm._v(\"时间\")]),_c('th',[_vm._v(\"类型\")]),_c('th',[_vm._v(\"金额\")]),_c('th',[_vm._v(\"余额\")]),_c('th',[_vm._v(\"说明\")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"empty-state\"},[_c('i',{staticClass:\"fas fa-inbox\"}),_c('p',[_vm._v(\"暂无交易记录\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"balance-page\">\n    <!-- 余额卡片 -->\n    <div class=\"balance-card\">\n      <div class=\"balance-info\">\n        <div class=\"balance-title\">当前余额</div>\n        <div class=\"amount\">¥ {{ formatAmount(currentBalance) }}</div>\n      </div>\n      <div class=\"balance-actions\">\n        <button class=\"btn-recharge\" @click=\"showRechargeDialog\">\n          <i class=\"fas fa-ticket-alt\"></i>\n          卡密充值\n        </button>\n      </div>\n    </div>\n\n    <!-- 交易记录面板 -->\n    <div class=\"transactions-section\">\n      <div class=\"section-header\">\n      <h3>交易记录</h3>\n        <div v-if=\"loading\" class=\"loading-indicator\">\n          <i class=\"fas fa-circle-notch fa-spin\"></i> 加载中\n        </div>\n      </div>\n      \n      <!-- 桌面端表格视图 -->\n      <div v-if=\"!isMobile\" class=\"table-container\">\n        <div class=\"table-wrapper\">\n        <table v-if=\"transactions.length > 0\">\n          <thead>\n            <tr>\n              <th>时间</th>\n              <th>类型</th>\n              <th>金额</th>\n              <th>余额</th>\n              <th>说明</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"transaction in transactions\" :key=\"transaction._id\">\n                <td class=\"time-cell\">{{ formatDate(transaction.createdAt) }}</td>\n              <td>\n                <span class=\"transaction-type\" :class=\"getTypeClass(transaction.type)\">\n                  {{ transaction.type }}\n                </span>\n              </td>\n                <td :class=\"getAmountClass(transaction.amount)\" class=\"amount-cell\">\n                {{ formatAmount(transaction.amount) }}\n              </td>\n                <td class=\"balance-cell\">{{ formatAmount(transaction.balance) }}</td>\n                <td class=\"description-cell\">{{ transaction.description || '-' }}</td>\n            </tr>\n          </tbody>\n        </table>\n        </div>\n      </div>\n\n      <!-- 移动端卡片视图 -->\n      <div v-else class=\"mobile-transactions\">\n        <transition-group name=\"list\" tag=\"div\" class=\"transaction-list\">\n        <div v-for=\"transaction in transactions\" :key=\"transaction._id\" class=\"transaction-card\">\n          <div class=\"card-header\">\n            <span class=\"transaction-type\" :class=\"getTypeClass(transaction.type)\">\n              {{ transaction.type }}\n            </span>\n            <span :class=\"getAmountClass(transaction.amount)\">\n              {{ formatAmount(transaction.amount) }}\n            </span>\n          </div>\n          <div class=\"card-body\">\n            <div class=\"info-row\">\n                <span class=\"label\"><i class=\"far fa-clock\"></i> 时间:</span>\n              <span class=\"value\">{{ formatDate(transaction.createdAt) }}</span>\n            </div>\n            <div class=\"info-row\">\n                <span class=\"label\"><i class=\"fas fa-wallet\"></i> 余额:</span>\n              <span class=\"value\">{{ formatAmount(transaction.balance) }}</span>\n            </div>\n            <div class=\"info-row\">\n                <span class=\"label\"><i class=\"fas fa-comment-alt\"></i> 说明:</span>\n              <span class=\"value\">{{ transaction.description || '-' }}</span>\n            </div>\n          </div>\n        </div>\n        </transition-group>\n      </div>\n\n      <!-- 分页控件 -->\n      <div v-if=\"transactions.length > 0\" class=\"pagination\">\n        <div class=\"pagination-info\">\n          共 <span class=\"text-primary\">{{ totalRecords }}</span> 条记录，当前第 <span class=\"text-primary\">{{ currentPage }}</span>/<span>{{ totalPages }}</span> 页\n        </div>\n\n        <div class=\"pagination-controls\">\n          <button \n            class=\"nav-btn prev-btn\" \n            :disabled=\"currentPage === 1\"\n            @click=\"changePage(currentPage - 1)\"\n          >\n            <i class=\"fas fa-chevron-left\"></i>\n            <span>上一页</span>\n          </button>\n\n          <div class=\"page-numbers\">\n            <template v-for=\"pageNum in displayedPages\">\n              <span \n                v-if=\"pageNum === '...'\" \n                :key=\"'ellipsis-' + pageNum\" \n                class=\"ellipsis\"\n              >...</span>\n              <button\n                v-else\n                :key=\"pageNum\"\n                class=\"page-num-btn\"\n                :class=\"{ active: currentPage === pageNum }\"\n                @click=\"changePage(pageNum)\"\n              >\n                {{ pageNum }}\n              </button>\n            </template>\n          </div>\n\n          <button \n            class=\"nav-btn next-btn\" \n            :disabled=\"currentPage === totalPages\"\n            @click=\"changePage(currentPage + 1)\"\n          >\n            <span>下一页</span>\n            <i class=\"fas fa-chevron-right\"></i>\n          </button>\n        </div>\n        \n        <div class=\"page-size-selector\">\n          <span>每页</span>\n          <select v-model=\"pageSize\" @change=\"handlePageSizeChange\">\n            <option v-for=\"size in pageSizes\" :key=\"size\" :value=\"size\">\n              {{ size }}\n            </option>\n          </select>\n          <span>条</span>\n        </div>\n      </div>\n\n      <div v-if=\"transactions.length === 0 && !loading\" class=\"no-data\">\n        <div class=\"empty-state\">\n          <i class=\"fas fa-inbox\"></i>\n          <p>暂无交易记录</p>\n        </div>\n      </div>\n    </div>\n\n    <!-- 卡密充值弹窗 -->\n    <transition name=\"fade\">\n    <div v-if=\"showRechargeModal\" class=\"modal-overlay\" @click=\"closeRechargeModal\">\n      <div class=\"modal\" @click.stop>\n        <div class=\"modal-header\">\n            <h3><i class=\"fas fa-ticket-alt\"></i> 卡密充值</h3>\n          <button class=\"close-btn\" @click=\"closeRechargeModal\">\n            <i class=\"fas fa-times\"></i>\n          </button>\n        </div>\n        \n        <div class=\"modal-content\">\n          <div class=\"input-group\">\n              <label for=\"card-input\">充值卡密</label>\n              <div class=\"input-wrapper\">\n            <input \n                  id=\"card-input\"\n              type=\"text\" \n              v-model=\"rechargeForm.cardNo\"\n                  placeholder=\"请输入16位充值卡密\"\n              maxlength=\"16\"\n              class=\"card-input\"\n            >\n                <div class=\"input-status\" :class=\"{'valid': isValidCardNo && rechargeForm.cardNo}\">\n                  <i class=\"fas\" :class=\"isValidCardNo && rechargeForm.cardNo ? 'fa-check-circle' : 'fa-exclamation-circle'\"></i>\n                </div>\n              </div>\n          </div>\n\n          <div class=\"tips\">\n            <i class=\"fas fa-info-circle\"></i>\n            <span>请输入16位充值卡密，充值成功后余额将立即到账</span>\n          </div>\n        </div>\n\n        <div class=\"modal-footer\">\n            <button class=\"cancel-btn\" @click=\"closeRechargeModal\">\n              <i class=\"fas fa-times\"></i> 取消\n            </button>\n          <button \n            class=\"confirm-btn\"\n            @click=\"confirmRecharge\"\n            :disabled=\"!isValidCardNo || rechargeLoading\"\n          >\n            <template v-if=\"!rechargeLoading\">\n              <i class=\"fas fa-check\"></i>\n              确认充值\n            </template>\n            <template v-else>\n              <i class=\"fas fa-spinner fa-spin\"></i>\n              充值中...\n            </template>\n          </button>\n        </div>\n      </div>\n    </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BalanceChange',\n  data() {\n    return {\n      currentBalance: 0,\n      transactions: [],\n      showRechargeModal: false,\n      rechargeForm: {\n        cardNo: ''\n      },\n      rechargeLoading: false,\n      isMobile: false,\n      // 分页相关数据\n      currentPage: 1,\n      pageSize: 10,\n      pageSizes: [10, 20, 50, 100],\n      totalRecords: 0,\n      loading: false\n    }\n  },\n  computed: {\n    isValidCardNo() {\n      return this.rechargeForm.cardNo.length === 16;\n    },\n    totalPages() {\n      return Math.ceil(this.totalRecords / this.pageSize);\n    },\n    displayedPages() {\n      const totalPages = this.totalPages;\n      const current = this.currentPage;\n      const delta = 2; // 当前页前后显示的页码数\n      \n      let pages = [];\n      let left = Math.max(1, current - delta);\n      let right = Math.min(totalPages, current + delta);\n\n      // 处理左边界\n      if (left > 1) {\n        pages.push(1);\n        if (left > 2) pages.push('...');\n      }\n\n      // 添加中间页码\n      for (let i = left; i <= right; i++) {\n        pages.push(i);\n      }\n\n      // 处理右边界\n      if (right < totalPages) {\n        if (right < totalPages - 1) pages.push('...');\n        pages.push(totalPages);\n      }\n\n      return pages;\n    }\n  },\n  methods: {\n    async loadBalance() {\n      try {\n        const response = await this.$api.get('/api/users/balance');\n        this.currentBalance = response.data.balance;\n      } catch (error) {\n        console.error('Load balance error:', error);\n        this.$message.error('获取余额失败');\n      }\n    },\n    async loadTransactions() {\n      try {\n        this.loading = true;\n        const response = await this.$api.get('/api/users/transactions', {\n          params: {\n            page: this.currentPage,\n            limit: this.pageSize\n          }\n        });\n        this.transactions = response.data.transactions.map(transaction => ({\n          ...transaction,\n          createdAt: new Date(transaction.createdAt).toLocaleString()\n        }));\n        this.totalRecords = response.data.total;\n      } catch (error) {\n        console.error('Load transactions error:', error);\n        this.$message.error('获取交易记录失败');\n      } finally {\n        this.loading = false;\n      }\n    },\n    async changePage(page) {\n      if (page < 1 || page > this.totalPages) return;\n      this.currentPage = page;\n      await this.loadTransactions();\n      // 滚动到表格顶部\n      const tableWrapper = this.$el.querySelector('.table-wrapper');\n      if (tableWrapper) {\n        tableWrapper.scrollTop = 0;\n      }\n    },\n    formatAmount(amount) {\n      return parseFloat(amount).toFixed(2);\n    },\n    formatDate(date) {\n      return new Date(date).toLocaleString();\n    },\n    getTypeClass(type) {\n      return {\n        'type-recharge': type === '卡密充值',\n        'type-income': type === '收入',\n        'type-expense': type === '支出'\n      };\n    },\n    getAmountClass(amount) {\n      return {\n        'positive-amount': amount > 0,\n        'negative-amount': amount < 0\n      };\n    },\n    showRechargeDialog() {\n      this.showRechargeModal = true;\n      this.rechargeForm.cardNo = '';\n      this.rechargeLoading = false;\n      // 自动聚焦到输入框\n      this.$nextTick(() => {\n        const input = document.querySelector('.card-input');\n        if (input) {\n          input.focus();\n        }\n      });\n    },\n    closeRechargeModal() {\n      this.showRechargeModal = false;\n      this.rechargeForm.cardNo = '';\n      this.rechargeLoading = false;\n    },\n    async confirmRecharge() {\n      if (!this.isValidCardNo || this.rechargeLoading) return;\n      \n      try {\n        this.rechargeLoading = true;\n        \n        // 检查卡密格式\n        if (!this.rechargeForm.cardNo) {\n          this.$message.error('请输入卡密');\n          return;\n        }\n        \n        if (this.rechargeForm.cardNo.length !== 16) {\n          this.$message.error('请输入16位卡密');\n          return;\n        }\n        \n        const response = await this.$api.post('/api/recharge-cards/use', {\n          cardNo: this.rechargeForm.cardNo.trim()\n        });\n        \n        // 充值成功\n        if (response.data) {\n          // 更新余额显示\n          this.currentBalance = response.data.balance;\n          \n          // 显示成功消息\n          this.$message.success(`充值成功，到账金额：¥${response.data.amount}`);\n          \n          // 关闭充值弹窗\n          this.closeRechargeModal();\n          \n          // 清空表单\n          this.rechargeForm.cardNo = '';\n          \n          // 重新加载余额和交易记录\n          await Promise.all([\n            this.loadBalance(),\n            this.loadTransactions()\n          ]);\n        }\n        \n      } catch (error) {\n        // 详细的错误处理\n        let errorMessage = '充值失败';\n        \n        if (error.response) {\n          // 服务器返回的错误信息\n          errorMessage = error.response.data?.message || '充值失败';\n          console.error('Server error:', error.response.data);\n        } else if (error.request) {\n          // 请求发送失败\n          errorMessage = '网络连接失败，请检查网络设置';\n          console.error('Network error:', error.request);\n        } else {\n          // 其他错误\n          errorMessage = error.message || '充值失败，请稍后重试';\n          console.error('Error:', error);\n        }\n        \n        // 显示错误消息\n        this.$message.error(errorMessage);\n        \n      } finally {\n        this.rechargeLoading = false;\n      }\n    },\n    checkMobile() {\n      this.isMobile = window.innerWidth <= 768;\n    },\n    async handlePageSizeChange() {\n      this.currentPage = 1; // 重置到第一页\n      await this.loadTransactions();\n    }\n  },\n  async created() {\n    this.checkMobile();\n    window.addEventListener('resize', this.checkMobile);\n    \n    await Promise.all([\n      this.loadBalance(),\n      this.loadTransactions()\n    ]);\n  },\n  beforeDestroy() {\n    window.removeEventListener('resize', this.checkMobile);\n  }\n}\n</script>\n\n<style scoped>\n.balance-page {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 1rem;\n}\n\n/* 余额卡片样式 */\n.balance-card {\n  background: linear-gradient(135deg, #4F46E5, #6366F1);\n  border-radius: 16px;\n  padding: 1.5rem 2rem;\n  color: white;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  box-shadow: 0 10px 15px -3px rgba(99, 102, 241, 0.2);\n  position: relative;\n  overflow: hidden;\n}\n\n.balance-card::before {\n  content: '';\n  position: absolute;\n  top: -50px;\n  right: -50px;\n  width: 200px;\n  height: 200px;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.1);\n  pointer-events: none;\n}\n\n.balance-card::after {\n  content: '';\n  position: absolute;\n  bottom: -80px;\n  left: 40px;\n  width: 150px;\n  height: 150px;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.08);\n  pointer-events: none;\n}\n\n.balance-info {\n  position: relative;\n  z-index: 1;\n}\n\n.balance-title {\n  font-size: 1rem;\n  opacity: 0.9;\n  margin-bottom: 0.75rem;\n  font-weight: 500;\n}\n\n.amount {\n  font-size: 2.5rem;\n  font-weight: 700;\n  letter-spacing: -0.02em;\n}\n\n.balance-actions {\n  position: relative;\n  z-index: 1;\n}\n\n.btn-recharge {\n  background: white;\n  color: #4F46E5;\n  padding: 0.75rem 1.5rem;\n  border: none;\n  border-radius: 12px;\n  font-weight: 600;\n  font-size: 1rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n}\n\n.btn-recharge:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n}\n\n.btn-recharge:active {\n  transform: translateY(0);\n  box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.1);\n}\n\n/* 交易记录部分样式 */\n.transactions-section {\n  background: white;\n  border-radius: 16px;\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n}\n\n.section-header {\n  padding: 1.5rem;\n  border-bottom: 1px solid #f0f0f0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.section-header h3 {\n  margin: 0;\n  font-size: 1.25rem;\n  font-weight: 600;\n  color: #1F2937;\n}\n\n.loading-indicator {\n  color: #6B7280;\n  font-size: 0.875rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n/* 表格样式 */\n.table-container {\n  padding: 0 1.5rem 1.5rem;\n}\n\n.table-wrapper {\n  overflow-x: auto;\n  border-radius: 8px;\n}\n\ntable {\n  width: 100%;\n  border-collapse: separate;\n  border-spacing: 0;\n}\n\nthead {\n  background-color: #F8FAFC;\n}\n\nth {\n  padding: 1rem;\n  text-align: left;\n  font-weight: 600;\n  color: #4B5563;\n  font-size: 0.9375rem;\n  border-bottom: 1px solid #E5E7EB;\n}\n\ntd {\n  padding: 1rem;\n  border-bottom: 1px solid #F3F4F6;\n  color: #1F2937;\n  font-size: 0.9375rem;\n}\n\ntbody tr:hover {\n  background-color: #F9FAFB;\n}\n\ntbody tr:last-child td {\n  border-bottom: none;\n}\n\n.time-cell {\n  min-width: 150px;\n  color: #6B7280;\n}\n\n.description-cell {\n  max-width: 250px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.amount-cell {\n  font-weight: 600;\n  min-width: 80px;\n}\n\n.balance-cell {\n  min-width: 80px;\n  color: #4B5563;\n}\n\n/* 交易类型样式 */\n.transaction-type {\n  padding: 0.35rem 0.75rem;\n  border-radius: 9999px;\n  font-size: 0.8125rem;\n  font-weight: 600;\n  display: inline-flex;\n  min-width: 70px;\n  justify-content: center;\n}\n\n.type-recharge {\n  background: #ECFDF5;\n  color: #059669;\n}\n\n.type-income {\n  background: #EEF2FF;\n  color: #4F46E5;\n}\n\n.type-expense {\n  background: #FEF2F2;\n  color: #DC2626;\n}\n\n/* 金额样式 */\n.positive-amount {\n  color: #059669;\n  font-weight: 600;\n}\n\n.negative-amount {\n  color: #DC2626;\n  font-weight: 600;\n}\n\n/* 分页控件样式 */\n.pagination {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 1.5rem;\n  gap: 1rem;\n  padding: 1rem 1.5rem;\n  border-top: 1px solid #F3F4F6;\n}\n\n.pagination-info {\n  font-size: 0.875rem;\n  color: #6B7280;\n}\n\n.text-primary {\n  color: #4F46E5;\n  font-weight: 600;\n}\n\n.pagination-controls {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n\n.page-numbers {\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n}\n\n.nav-btn {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  border: 1px solid #E5E7EB;\n  background: white;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  color: #4B5563;\n  font-size: 0.875rem;\n  font-weight: 500;\n}\n\n.nav-btn:hover:not(:disabled) {\n  background: #4F46E5;\n  color: white;\n  border-color: #4F46E5;\n}\n\n.nav-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  background: #F9FAFB;\n}\n\n.page-num-btn {\n  min-width: 36px;\n  height: 36px;\n  padding: 0 0.5rem;\n  border: 1px solid #E5E7EB;\n  background: white;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.875rem;\n  color: #4B5563;\n  }\n\n.page-num-btn.active {\n  background: #4F46E5;\n  color: white;\n  border-color: #4F46E5;\n  font-weight: 600;\n  }\n\n.page-num-btn:hover:not(.active):not(:disabled) {\n  border-color: #4F46E5;\n  color: #4F46E5;\n  }\n\n.ellipsis {\n  padding: 0 0.25rem;\n  color: #6B7280;\n  font-size: 0.875rem;\n  }\n\n.page-size-selector {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  color: #6B7280;\n    font-size: 0.875rem;\n  }\n\n.page-size-selector select {\n  padding: 0.375rem 0.75rem;\n  border: 1px solid #E5E7EB;\n  border-radius: 8px;\n  background: white;\n  cursor: pointer;\n    font-size: 0.875rem;\n  color: #4B5563;\n  min-width: 70px;\n  text-align: center;\n  transition: all 0.2s ease;\n  }\n\n.page-size-selector select:focus {\n  outline: none;\n  border-color: #4F46E5;\n  box-shadow: 0 0 0 2px rgba(79, 70, 229, 0.1);\n  }\n\n/* 移动端卡片样式 */\n.mobile-transactions {\n    padding: 1rem;\n  }\n\n.transaction-list {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.transaction-card {\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);\n  overflow: hidden;\n  border: 1px solid #F3F4F6;\n  transition: all 0.3s ease;\n}\n\n.transaction-card:hover {\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05), 0 1px 3px rgba(0, 0, 0, 0.1);\n  transform: translateY(-1px);\n}\n\n.card-header {\n  padding: 1rem;\n  background: #F9FAFB;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid #F3F4F6;\n}\n\n.card-body {\n  padding: 1rem;\n}\n\n.info-row {\n  display: flex;\n  justify-content: space-between;\n  padding: 0.625rem 0;\n  border-bottom: 1px solid #F3F4F6;\n}\n\n.info-row:last-child {\n  border-bottom: none;\n}\n\n.label {\n  color: #6B7280;\n  font-size: 0.875rem;\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n}\n\n.value {\n  font-weight: 500;\n  color: #1F2937;\n  text-align: right;\n  max-width: 60%;\n  word-break: break-word;\n}\n\n/* 无数据状态 */\n.no-data {\n  padding: 3rem 1.5rem;\n  text-align: center;\n}\n\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1rem;\n}\n\n.empty-state i {\n  font-size: 2.5rem;\n  color: #D1D5DB;\n}\n\n.empty-state p {\n  color: #6B7280;\n  font-size: 1rem;\n    margin: 0;\n  }\n\n/* 模态框样式 */\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(4px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: 1rem;\n  }\n\n.modal {\n  background: white;\n  border-radius: 16px;\n  width: 100%;\n  max-width: 450px;\n  overflow: hidden;\n  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);\n  animation: modalSlideIn 0.3s ease;\n  }\n\n.modal-header {\n  padding: 1.5rem;\n  border-bottom: 1px solid #F3F4F6;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.modal-header h3 {\n  margin: 0;\n  color: #1F2937;\n  font-size: 1.25rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  }\n\n.close-btn {\n  background: none;\n  border: none;\n  font-size: 1.25rem;\n  cursor: pointer;\n  color: #6B7280;\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  }\n\n.close-btn:hover {\n  background: #F3F4F6;\n  color: #1F2937;\n}\n\n.modal-content {\n  padding: 1.5rem;\n  }\n\n.input-group {\n  margin-bottom: 1.5rem;\n  }\n\n.input-group label {\n  display: block;\n  margin-bottom: 0.5rem;\n  color: #4B5563;\n  font-weight: 500;\n  font-size: 0.9375rem;\n}\n\n.input-wrapper {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.card-input {\n  width: 100%;\n  padding: 0.875rem 1rem;\n  padding-right: 2.5rem;\n  border: 1px solid #D1D5DB;\n  border-radius: 10px;\n  font-size: 1rem;\n  font-family: monospace;\n  letter-spacing: 1px;\n  transition: all 0.2s ease;\n  color: #1F2937;\n}\n\n.card-input:focus {\n  outline: none;\n  border-color: #4F46E5;\n  box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);\n  }\n\n.input-status {\n  position: absolute;\n  right: 1rem;\n  color: #EF4444;\n  }\n\n.input-status.valid {\n  color: #10B981;\n}\n\n.tips {\n  display: flex;\n  align-items: flex-start;\n  gap: 0.5rem;\n    padding: 1rem;\n  background: #EFF6FF;\n  border-radius: 10px;\n  margin-top: 0.5rem;\n}\n\n.tips i {\n  color: #3B82F6;\n  margin-top: 0.125rem;\n}\n\n.tips span {\n  color: #1D4ED8;\n  font-size: 0.875rem;\n  line-height: 1.5;\n  }\n\n  .modal-footer {\n  padding: 1.5rem;\n  border-top: 1px solid #F3F4F6;\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n  background: #F9FAFB;\n  }\n\n  .cancel-btn,\n  .confirm-btn {\n  padding: 0.75rem 1.5rem;\n  border-radius: 10px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  min-width: 110px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  font-size: 0.9375rem;\n}\n\n.cancel-btn {\n  background: white;\n  border: 1px solid #D1D5DB;\n  color: #4B5563;\n}\n\n.cancel-btn:hover {\n  background: #F9FAFB;\n  border-color: #9CA3AF;\n  color: #1F2937;\n}\n\n.confirm-btn {\n  background: linear-gradient(135deg, #4F46E5, #6366F1);\n  border: none;\n  color: white;\n  box-shadow: 0 2px 4px rgba(99, 102, 241, 0.2);\n}\n\n.confirm-btn:hover:not(:disabled) {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);\n}\n\n.confirm-btn:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: none;\n}\n\n/* 动画效果 */\n@keyframes modalSlideIn {\n  from {\n    opacity: 0;\n    transform: translateY(-20px);\n}\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.fade-enter-active, .fade-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.fade-enter-from, .fade-leave-to {\n  opacity: 0;\n}\n\n.list-enter-active,\n.list-leave-active {\n  transition: all 0.3s ease;\n}\n\n.list-enter-from,\n.list-leave-to {\n  opacity: 0;\n  transform: translateY(20px);\n}\n\n/* 响应式适配 */\n@media (max-width: 768px) {\n  .balance-page {\n    gap: 1rem;\n    padding: 0 0.5rem;\n}\n\n  .balance-card {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 1.5rem;\n    padding: 1.5rem;\n  }\n  \n  .amount {\n    font-size: 2rem;\n  }\n  \n  .balance-actions {\n  justify-content: center;\n  }\n  \n  .btn-recharge {\n    width: 100%;\n    justify-content: center;\n}\n\n  .section-header {\n    padding: 1.25rem;\n}\n\n  .pagination {\n    padding: 1.25rem 1rem;\n}\n\n  .page-numbers {\n    display: none;\n  }\n  \n  .nav-btn {\n    flex: 1;\n    justify-content: center;\n  }\n  \n  .pagination-info {\n    order: 3;\n    margin-top: 0.5rem;\n}\n\n  .pagination-controls {\n    width: 100%;\n  }\n  \n  .transaction-card {\n    margin: 0;\n  }\n  \n  .card-header {\n    padding: 0.875rem;\n  }\n  \n  .card-body {\n    padding: 0.875rem;\n}\n\n  .label i {\n    width: 16px;\n  }\n}\n\n/* 极小屏幕优化 */\n@media (max-width: 360px) {\n  .balance-card {\n    padding: 1.25rem 1rem;\n  }\n\n  .section-header h3 {\n    font-size: 1.125rem;\n  }\n\n  .btn-recharge {\n    font-size: 0.875rem;\n    padding: 0.625rem 1.25rem;\n  }\n  \n  .modal-header, \n  .modal-content, \n  .modal-footer {\n    padding: 1.25rem;\n}\n\n  .cancel-btn, \n  .confirm-btn {\n    min-width: 90px;\n    padding: 0.625rem 1rem;\n    font-size: 0.875rem;\n  }\n}\n</style>\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BalanceChange.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BalanceChange.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./BalanceChange.vue?vue&type=template&id=0df92723&scoped=true\"\nimport script from \"./BalanceChange.vue?vue&type=script&lang=js\"\nexport * from \"./BalanceChange.vue?vue&type=script&lang=js\"\nimport style0 from \"./BalanceChange.vue?vue&type=style&index=0&id=0df92723&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0df92723\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport { paymentRoutes } from './paymentRoutes'\nimport Login from '../views/Login.vue'\nimport ChannelMarket from '../views/ChannelMarket.vue'\nimport OrderQuery from '../views/OrderQuery.vue'\nimport BalanceChange from '../views/BalanceChange.vue'\nimport VoiceService from '../views/VoiceService.vue'\nimport ToolDownload from '../views/ToolDownload.vue'\nimport NProgress from 'nprogress'\nimport 'nprogress/nprogress.css'\n\nVue.use(VueRouter)\n\nconst routes = [\n  {\n    path: '/',\n    name: 'Login',\n    component: Login,\n    meta: { requiresAuth: false }\n  },\n  {\n    path: '/login',\n    name: 'LoginAlias',\n    component: Login,\n    meta: { requiresAuth: false }\n  },\n  {\n    path: '/channel-market',\n    name: 'ChannelMarket',\n    component: ChannelMarket,\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/order-query',\n    name: 'OrderQuery',\n    component: OrderQuery,\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/balance-change',\n    name: 'BalanceChange',\n    component: BalanceChange,\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/voice-service',\n    name: 'VoiceService',\n    component: VoiceService,\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/tool-download',\n    name: 'ToolDownload',\n    component: ToolDownload,\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/toolbox/sdk-to-direct-pay',\n    name: 'SdkToDirectPay',\n    component: () => import('@/views/Toolbox/SdkToDirectPay.vue'),\n    meta: { requiresAuth: true }\n  },\n  ...paymentRoutes, // 添加支付路由\n  {\n    path: '/user-management',\n    name: 'UserManagement',\n    component: () => import('@/components/UserManagement.vue'),\n    meta: { \n      requiresAuth: true,\n      requiresRole: ['superadmin']\n    },\n    beforeEnter: (to, from, next) => {\n      const userRole = localStorage.getItem('userRole');\n      console.log('UserManagement route guard:', {\n        userRole,\n        requiresRole: to.meta.requiresRole\n      });\n      \n      if (userRole === 'superadmin') {\n        next();\n      } else {\n        next('/channel-market');\n      }\n    }\n  },\n  {\n    path: '/recharge-cards',\n    name: 'RechargeCards',\n    component: () => import('@/views/RechargeCards.vue'),\n    meta: { \n      requiresAuth: true,\n      requiresRole: ['superadmin']\n    }\n  },\n  {\n    path: '/generate-cards',\n    name: 'GenerateCards',\n    component: () => import('@/views/GenerateCards.vue'),\n    meta: {\n      requiresAuth: true,\n      requiresRole: ['superadmin']\n    },\n    beforeEnter: (to, from, next) => {\n      const userRole = localStorage.getItem('userRole');\n      if (userRole === 'superadmin') {\n        next();\n      } else {\n        next('/channel-market');\n      }\n    }\n  },\n  {\n    path: '/invite-codes',\n    name: 'InviteCodes',\n    component: () => import('@/views/InviteCodes.vue'),\n    meta: { \n      requiresAuth: true,\n      roles: ['superadmin']\n    }\n  },\n  {\n    path: '/domain-management',\n    name: 'DomainManagement',\n    component: () => import('@/views/DomainManagement.vue'),\n    meta: {\n      requiresAuth: true,\n      requiresRole: ['superadmin']\n    }\n  }\n]\n\nconst router = new VueRouter({\n  mode: 'hash',\n  base: process.env.BASE_URL,\n  routes\n})\n\nrouter.beforeEach((to, from, next) => {\n  NProgress.start()\n  \n  const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true'\n  const userRole = localStorage.getItem('userRole')\n  const token = localStorage.getItem('token')\n  \n\n  // 如果是登录页面，直接放行\n  if (to.name === 'Login' || to.name === 'LoginAlias') {\n    if (isLoggedIn && token) {\n      next({ name: 'ChannelMarket', replace: true })\n    } else {\n      next()\n    }\n    return\n  }\n\n  // 检查是否需要认证\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    if (!isLoggedIn || !token) {\n      // 清除所有登录状态\n      localStorage.removeItem('token');\n      localStorage.removeItem('isLoggedIn');\n      localStorage.removeItem('currentUserId');\n      localStorage.removeItem('userRole');\n      \n      next({ \n        name: 'Login', \n        query: { redirect: to.fullPath },\n        replace: true \n      })\n    } else if (to.meta.requiresRole && !to.meta.requiresRole.includes(userRole)) {\n      next({ name: 'ChannelMarket', replace: true })\n    } else {\n      next()\n    }\n  } else {\n    next()\n  }\n})\n\nrouter.afterEach(() => {\n  NProgress.done()\n})\n\nrouter.onError((error) => {\n  console.error('Router error:', error)\n  NProgress.done()\n})\n\nexport default router\n"],"sourceRoot":""}