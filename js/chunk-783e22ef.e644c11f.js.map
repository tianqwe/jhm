{"version":3,"sources":["webpack:///./src/views/Toolbox/SdkToDirectPay.vue?343a","webpack:///./src/views/Toolbox/SdkToDirectPay.vue","webpack:///src/views/Toolbox/SdkToDirectPay.vue","webpack:///./src/views/Toolbox/SdkToDirectPay.vue?395f","webpack:///./src/views/Toolbox/SdkToDirectPay.vue?782b"],"names":["render","_vm","this","_c","_self","staticClass","_m","directives","name","rawName","value","sdkParams","expression","attrs","isLoading","domProps","on","$event","target","composing","fillSampleData","_v","convertToDirectPay","error","_s","_e","paymentUrl","formattedCountdown","qrCodeDataUrl","ref","copyLink","class","copySuccess","staticRenderFns","data","countdown","timer","sampleData","computed","minutes","Math","floor","seconds","toString","padStart","methods","resetState","response","$api","post","headers","generateQrCode","startTimer","message","err","_err$response","_err$response$data","console","QRCode","toDataURL","width","margin","errorCorrectionLevel","setInterval","clearInterval","$refs","paymentLinkInput","select","document","execCommand","setTimeout","beforeDestroy","component"],"mappings":"kHAAA,W,2CCAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACJ,EAAIK,GAAG,GAAGH,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,MAAM,CAACE,YAAY,eAAe,CAACJ,EAAIK,GAAG,GAAGH,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,WAAW,CAACI,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOT,EAAIU,UAAWC,WAAW,cAAcC,MAAM,CAAC,YAAc,wBAAwB,SAAWZ,EAAIa,WAAWC,SAAS,CAAC,MAASd,EAAIU,WAAYK,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOC,OAAOC,YAAiBlB,EAAIU,UAAUM,EAAOC,OAAOR,WAAUP,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,SAAS,CAACE,YAAY,aAAaQ,MAAM,CAAC,SAAWZ,EAAIa,WAAWE,GAAG,CAAC,MAAQf,EAAImB,iBAAiB,CAACjB,EAAG,IAAI,CAACE,YAAY,iBAAiBJ,EAAIoB,GAAG,cAAclB,EAAG,SAAS,CAACE,YAAY,aAAaQ,MAAM,CAAC,UAAYZ,EAAIU,WAAaV,EAAIa,WAAWE,GAAG,CAAC,MAAQf,EAAIqB,qBAAqB,CAAGrB,EAAIa,UAAqFX,EAAG,OAAO,CAACA,EAAG,IAAI,CAACE,YAAY,2BAA2BJ,EAAIoB,GAAG,cAA3IlB,EAAG,OAAO,CAACA,EAAG,IAAI,CAACE,YAAY,wBAAwBJ,EAAIoB,GAAG,oBAAmGlB,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACJ,EAAIK,GAAG,GAAGH,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,aAAa,CAACU,MAAM,CAAC,KAAO,SAAS,CAAEZ,EAAIsB,MAAOpB,EAAG,MAAM,CAACE,YAAY,+BAA+B,CAACF,EAAG,IAAI,CAACE,YAAY,8BAA8BF,EAAG,IAAI,CAACF,EAAIoB,GAAGpB,EAAIuB,GAAGvB,EAAIsB,YAAYtB,EAAIwB,OAAOtB,EAAG,aAAa,CAACU,MAAM,CAAC,KAAO,SAAS,CAAEZ,EAAIa,YAAcb,EAAIyB,WAAYvB,EAAG,MAAM,CAACE,YAAY,iCAAiC,CAACF,EAAG,MAAM,CAACE,YAAY,YAAYF,EAAG,IAAI,CAACF,EAAIoB,GAAG,sBAAsBpB,EAAIwB,OAAOtB,EAAG,aAAa,CAACU,MAAM,CAAC,KAAO,SAAS,CAAEZ,EAAIyB,WAAYvB,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,wBAAwB,CAACF,EAAG,IAAI,CAACE,YAAY,iBAAiBF,EAAG,OAAO,CAACF,EAAIoB,GAAG,YAAYlB,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,IAAI,CAACE,YAAY,0BAA0BF,EAAG,OAAO,CAACF,EAAIoB,GAAGpB,EAAIuB,GAAGvB,EAAI0B,2BAA2BxB,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAAEJ,EAAI2B,cAAezB,EAAG,MAAM,CAACU,MAAM,CAAC,IAAMZ,EAAI2B,cAAc,IAAM,WAAWzB,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgBF,EAAG,IAAI,CAACE,YAAY,UAAU,CAACJ,EAAIoB,GAAG,oBAAoBlB,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,KAAK,CAACF,EAAIoB,GAAG,UAAUlB,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,QAAQ,CAAC0B,IAAI,mBAAmBhB,MAAM,CAAC,KAAO,OAAO,SAAW,IAAIE,SAAS,CAAC,MAAQd,EAAIyB,cAAcvB,EAAG,SAAS,CAACE,YAAY,WAAWQ,MAAM,CAAC,MAAQ,QAAQG,GAAG,CAAC,MAAQf,EAAI6B,WAAW,CAAC3B,EAAG,IAAI,CAAC4B,MAAM9B,EAAI+B,YAAc,eAAiB,oBAAoB7B,EAAG,IAAI,CAACE,YAAY,YAAY,CAACJ,EAAIoB,GAAG,0BAA0BpB,EAAIwB,OAASxB,EAAIyB,YAAezB,EAAIa,WAAcb,EAAIsB,MAA8HtB,EAAIwB,KAA3HtB,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,IAAI,CAACE,YAAY,sBAAsBF,EAAG,IAAI,CAACF,EAAIoB,GAAG,yBAAkC,UAEpzFY,EAAkB,CAAC,WAAY,IAAIhC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,KAAK,CAACE,YAAY,cAAc,CAACJ,EAAIoB,GAAG,mBAAmBlB,EAAG,IAAI,CAACE,YAAY,iBAAiB,CAACJ,EAAIoB,GAAG,iCACtN,WAAY,IAAIpB,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,IAAI,CAACE,YAAY,oBAAoBF,EAAG,KAAK,CAACF,EAAIoB,GAAG,aAC/I,WAAY,IAAIpB,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,IAAI,CAACE,YAAY,kBAAkBF,EAAG,KAAK,CAACF,EAAIoB,GAAG,c,qBCsGhI,GACfb,KAAA,iBACA0B,OACA,OACAvB,UAAA,GACAe,WAAA,GACAE,cAAA,GACAL,MAAA,GACAT,WAAA,EACAqB,UAAA,IACAC,MAAA,KACAJ,aAAA,EACAK,WAAA,u8BAGAC,SAAA,CACAX,qBACA,MAAAY,EAAAC,KAAAC,MAAA,KAAAN,UAAA,IACAO,EAAA,KAAAP,UAAA,GACA,SAAAI,EAAAI,WAAAC,SAAA,UAAAF,EAAAC,WAAAC,SAAA,WAGAC,QAAA,CACAzB,iBACA,KAAAT,UAAA,KAAA0B,YAEA,2BAEA,GADA,KAAAS,aACA,KAAAnC,UAAA,CAIA,KAAAG,WAAA,EAEA,IACA,MAAAiC,QAAA,KAAAC,KAAAC,KAAA,2BAAAtC,UAAA,CACAuC,QAAA,CACA,+BAIAH,EAAAb,MAAAa,EAAAb,KAAAR,YACA,KAAAA,WAAAqB,EAAAb,KAAAR,WACA,KAAAyB,iBACA,KAAAC,cAEA,KAAA7B,MAAAwB,EAAAb,KAAAmB,SAAA,oBAEA,MAAAC,GAAA,IAAAC,EAAAC,EACA,KAAAjC,OAAA,QAAAgC,EAAAD,EAAAP,gBAAA,IAAAQ,GAAA,QAAAC,EAAAD,EAAArB,YAAA,IAAAsB,OAAA,EAAAA,EAAAH,UAAA,oBACAI,QAAAlC,MAAA+B,GACA,QACA,KAAAxC,WAAA,QAvBA,KAAAS,MAAA,YA0BA,uBACA,QAAAG,WACA,IACA,KAAAE,oBAAA8B,IAAAC,UAAA,KAAAjC,WAAA,CACAkC,MAAA,IACAC,OAAA,EACAC,qBAAA,MAEA,MAAAR,GACAG,QAAAlC,MAAA,4BAAA+B,GACA,KAAA/B,MAAA,aAGA6B,aACA,KAAAjB,UAAA,IACA,KAAAC,MAAA2B,YAAA,KACA,KAAA5B,UAAA,EACA,KAAAA,aAEA,KAAAW,aACA,KAAAvB,MAAA,mBAEA,MAEAuB,aACA,KAAApB,WAAA,GACA,KAAAE,cAAA,GACA,KAAAL,MAAA,GACA,KAAAS,aAAA,EACA,KAAAI,QACA4B,cAAA,KAAA5B,OACA,KAAAA,MAAA,OAGAN,WACA,KAAAJ,aACA,KAAAuC,MAAAC,iBAAAC,SACAC,SAAAC,YAAA,QACA,KAAArC,aAAA,EACAsC,WAAA,KACA,KAAAtC,aAAA,GACA,QAGAuC,gBACA,KAAAnC,OACA4B,cAAA,KAAA5B,SC/MsW,I,wBCQlWoC,EAAY,eACd,EACAxE,EACAiC,GACA,EACA,KACA,WACA,MAIa,aAAAuC,E","file":"js/chunk-783e22ef.e644c11f.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SdkToDirectPay.vue?vue&type=style&index=0&id=129b7362&prod&scoped=true&lang=css\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"sdk-to-direct-pay\"},[_vm._m(0),_c('div',{staticClass:\"page-layout\"},[_c('div',{staticClass:\"input-panel\"},[_vm._m(1),_c('div',{staticClass:\"panel-body\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.sdkParams),expression:\"sdkParams\"}],attrs:{\"placeholder\":\"在此处粘贴完整的SDK支付参数字符串...\",\"disabled\":_vm.isLoading},domProps:{\"value\":(_vm.sdkParams)},on:{\"input\":function($event){if($event.target.composing)return;_vm.sdkParams=$event.target.value}}}),_c('div',{staticClass:\"action-row\"},[_c('button',{staticClass:\"sample-btn\",attrs:{\"disabled\":_vm.isLoading},on:{\"click\":_vm.fillSampleData}},[_c('i',{staticClass:\"fas fa-flask\"}),_vm._v(\" 填充测试数据 \")]),_c('button',{staticClass:\"action-btn\",attrs:{\"disabled\":!_vm.sdkParams || _vm.isLoading},on:{\"click\":_vm.convertToDirectPay}},[(!_vm.isLoading)?_c('span',[_c('i',{staticClass:\"fas fa-exchange-alt\"}),_vm._v(\" 立即转换 \")]):_c('span',[_c('i',{staticClass:\"fas fa-spinner fa-spin\"}),_vm._v(\" 转换中... \")])])])])]),_c('div',{staticClass:\"result-panel\"},[_vm._m(2),_c('div',{staticClass:\"panel-body\"},[_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.error)?_c('div',{staticClass:\"state-container error-state\"},[_c('i',{staticClass:\"fas fa-exclamation-circle\"}),_c('p',[_vm._v(_vm._s(_vm.error))])]):_vm._e()]),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.isLoading && !_vm.paymentUrl)?_c('div',{staticClass:\"state-container loading-state\"},[_c('div',{staticClass:\"spinner\"}),_c('p',[_vm._v(\"正在努力转换中，请稍候...\")])]):_vm._e()]),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.paymentUrl)?_c('div',{staticClass:\"payment-result\"},[_c('div',{staticClass:\"result-header\"},[_c('div',{staticClass:\"status-badge success\"},[_c('i',{staticClass:\"fas fa-check\"}),_c('span',[_vm._v(\"转换成功\")])]),_c('div',{staticClass:\"timer-badge\"},[_c('i',{staticClass:\"fas fa-hourglass-half\"}),_c('span',[_vm._v(_vm._s(_vm.formattedCountdown))])])]),_c('div',{staticClass:\"qr-section\"},[_c('div',{staticClass:\"qr-wrapper\"},[(_vm.qrCodeDataUrl)?_c('img',{attrs:{\"src\":_vm.qrCodeDataUrl,\"alt\":\"支付二维码\"}}):_c('div',{staticClass:\"qr-placeholder\"},[_c('div',{staticClass:\"spinner\"})])]),_c('p',{staticClass:\"qr-tip\"},[_vm._v(\"请使用支付宝扫码完成支付\")])]),_c('div',{staticClass:\"link-section\"},[_c('h4',[_vm._v(\"支付链接\")]),_c('div',{staticClass:\"input-group\"},[_c('input',{ref:\"paymentLinkInput\",attrs:{\"type\":\"text\",\"readonly\":\"\"},domProps:{\"value\":_vm.paymentUrl}}),_c('button',{staticClass:\"copy-btn\",attrs:{\"title\":\"复制链接\"},on:{\"click\":_vm.copyLink}},[_c('i',{class:_vm.copySuccess ? 'fas fa-check' : 'fas fa-copy'})])]),_c('p',{staticClass:\"link-tip\"},[_vm._v(\"链接有效期 5 分钟，请尽快使用\")])])]):_vm._e()]),(!_vm.paymentUrl && !_vm.isLoading && !_vm.error)?_c('div',{staticClass:\"empty-state\"},[_c('i',{staticClass:\"fas fa-arrow-left\"}),_c('p',[_vm._v(\"请在左侧输入SDK参数并点击转换\")])]):_vm._e()],1)])])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"page-header\"},[_c('h1',{staticClass:\"page-title\"},[_vm._v(\"SDK 转直付 (支付宝)\")]),_c('p',{staticClass:\"page-subtitle\"},[_vm._v(\"将应用内支付参数转换为可直接访问的支付宝支付页面\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"panel-header\"},[_c('i',{staticClass:\"fas fa-keyboard\"}),_c('h2',[_vm._v(\"参数输入\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"panel-header\"},[_c('i',{staticClass:\"fas fa-qrcode\"}),_c('h2',[_vm._v(\"支付信息\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"sdk-to-direct-pay\">\n    <div class=\"page-header\">\n      <h1 class=\"page-title\">SDK 转直付 (支付宝)</h1>\n      <p class=\"page-subtitle\">将应用内支付参数转换为可直接访问的支付宝支付页面</p>\n    </div>\n\n    <div class=\"page-layout\">\n      <!-- 左侧：参数输入区 -->\n      <div class=\"input-panel\">\n        <div class=\"panel-header\">\n          <i class=\"fas fa-keyboard\"></i>\n          <h2>参数输入</h2>\n        </div>\n        <div class=\"panel-body\">\n          <textarea\n            v-model=\"sdkParams\"\n            placeholder=\"在此处粘贴完整的SDK支付参数字符串...\"\n            :disabled=\"isLoading\"\n          ></textarea>\n          <div class=\"action-row\">\n            <button class=\"sample-btn\" @click=\"fillSampleData\" :disabled=\"isLoading\">\n              <i class=\"fas fa-flask\"></i> 填充测试数据\n            </button>\n            <button class=\"action-btn\" @click=\"convertToDirectPay\" :disabled=\"!sdkParams || isLoading\">\n              <span v-if=\"!isLoading\">\n                <i class=\"fas fa-exchange-alt\"></i> 立即转换\n              </span>\n              <span v-else>\n                <i class=\"fas fa-spinner fa-spin\"></i> 转换中...\n              </span>\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <!-- 右侧：结果展示区 -->\n      <div class=\"result-panel\">\n        <div class=\"panel-header\">\n          <i class=\"fas fa-qrcode\"></i>\n          <h2>支付信息</h2>\n        </div>\n        <div class=\"panel-body\">\n          <transition name=\"fade\">\n            <div v-if=\"error\" class=\"state-container error-state\">\n              <i class=\"fas fa-exclamation-circle\"></i>\n              <p>{{ error }}</p>\n            </div>\n          </transition>\n          \n          <transition name=\"fade\">\n            <div v-if=\"isLoading && !paymentUrl\" class=\"state-container loading-state\">\n              <div class=\"spinner\"></div>\n              <p>正在努力转换中，请稍候...</p>\n            </div>\n          </transition>\n\n          <transition name=\"fade\">\n            <div v-if=\"paymentUrl\" class=\"payment-result\">\n              <div class=\"result-header\">\n                <div class=\"status-badge success\">\n                  <i class=\"fas fa-check\"></i>\n                  <span>转换成功</span>\n                </div>\n                <div class=\"timer-badge\">\n                  <i class=\"fas fa-hourglass-half\"></i>\n                  <span>{{ formattedCountdown }}</span>\n                </div>\n              </div>\n              \n              <div class=\"qr-section\">\n                <div class=\"qr-wrapper\">\n                  <img v-if=\"qrCodeDataUrl\" :src=\"qrCodeDataUrl\" alt=\"支付二维码\" />\n                  <div v-else class=\"qr-placeholder\">\n                    <div class=\"spinner\"></div>\n                  </div>\n                </div>\n                <p class=\"qr-tip\">请使用支付宝扫码完成支付</p>\n              </div>\n\n              <div class=\"link-section\">\n                <h4>支付链接</h4>\n                <div class=\"input-group\">\n                  <input type=\"text\" :value=\"paymentUrl\" readonly ref=\"paymentLinkInput\" />\n                  <button @click=\"copyLink\" title=\"复制链接\" class=\"copy-btn\">\n                    <i :class=\"copySuccess ? 'fas fa-check' : 'fas fa-copy'\"></i>\n                  </button>\n                </div>\n                <p class=\"link-tip\">链接有效期 5 分钟，请尽快使用</p>\n              </div>\n            </div>\n          </transition>\n\n          <div v-if=\"!paymentUrl && !isLoading && !error\" class=\"empty-state\">\n            <i class=\"fas fa-arrow-left\"></i>\n            <p>请在左侧输入SDK参数并点击转换</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport QRCode from 'qrcode';\n\nexport default {\n  name: 'SdkToDirectPay',\n  data() {\n    return {\n      sdkParams: '',\n      paymentUrl: '',\n      qrCodeDataUrl: '',\n      error: '',\n      isLoading: false,\n      countdown: 300,\n      timer: null,\n      copySuccess: false,\n      sampleData: 'alipay_sdk=alipay-sdk-java-3.7.69.ALL&app_id=2019041563856886&biz_content=%7B%22body%22%3A%22%E4%BA%A4%E9%80%9A%E8%81%94%E5%90%88%E8%AE%A2%E5%8D%95%22%2C%22out_trade_no%22%3A%2225062102485543737841%22%2C%22product_code%22%3A%22QUICK_MSECURITY_PAY%22%2C%22subject%22%3A%22%E4%BA%A4%E9%80%9A%E8%81%94%E5%90%88%22%2C%22timeout_express%22%3A%2215d%22%2C%22total_amount%22%3A%2250.0%22%7D&charset=UTF-8&format=json&method=alipay.trade.app.pay&notify_url=https%3A%2F%2Fpay.t-union.com%3A16042%2Ftmtps%2Fpayment%2FaliPayResultNotice&sign_type=RSA2&timestamp=2025-06-21+02%3A48%3A55&version=1.0&sign=mGNooifsQ9SulWU65%2BDdVdJYB5R50%2BW1jYPBYDBUrC1Z8s4mtqxukrWsjNxLQs6GxL%2FiBcvhVyi8FTZxAj251T8PbeoNtm4gcgeb6DjszMGyjOADDU5zzwcZFAqdeJwYF%2Fe49e%2FrPv8Z%2FxP1nFRlUp%2B9ldtcrDR4AGxGPcBm4rnTX3QZFwnODbm4m9z3MDGYm4tp1Tva0kL7V%2FJGU891NmB4N0B8z%2FBHaOeW%2BpHUODwXfSO6HamUoVTAuEbybkRFPBEAFUmDMpptRP7%2FD553vY9orswFetQ5qb8xZk8W1rnqL2x1Pgn3CzRB5YikkRQiTRWS6d5Qb2hCwsegSzKvIQ%3D%3D'\n    };\n  },\n  computed: {\n    formattedCountdown() {\n      const minutes = Math.floor(this.countdown / 60);\n      const seconds = this.countdown % 60;\n      return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n    }\n  },\n  methods: {\n    fillSampleData() {\n      this.sdkParams = this.sampleData;\n    },\n    async convertToDirectPay() {\n      this.resetState();\n      if (!this.sdkParams) {\n        this.error = '请输入SDK参数';\n        return;\n      }\n      this.isLoading = true;\n\n      try {\n        const response = await this.$api.post('/api/create-payment', this.sdkParams, {\n          headers: {\n            'Content-Type': 'text/plain'\n          }\n        });\n        \n        if (response.data && response.data.paymentUrl) {\n          this.paymentUrl = response.data.paymentUrl;\n          this.generateQrCode();\n          this.startTimer();\n        } else {\n          this.error = response.data.message || '未能获取支付链接，请检查参数格式。';\n        }\n      } catch (err) {\n        this.error = err.response?.data?.message || '转换失败，请检查参数或联系管理员。';\n        console.error(err);\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    async generateQrCode() {\n      if (!this.paymentUrl) return;\n      try {\n        this.qrCodeDataUrl = await QRCode.toDataURL(this.paymentUrl, {\n          width: 200,\n          margin: 1,\n          errorCorrectionLevel: 'H'\n        });\n      } catch (err) {\n        console.error('QR code generation failed', err);\n        this.error = '二维码生成失败。';\n      }\n    },\n    startTimer() {\n      this.countdown = 300;\n      this.timer = setInterval(() => {\n        if (this.countdown > 0) {\n          this.countdown--;\n        } else {\n          this.resetState();\n          this.error = '支付链接已过期，请重新生成。';\n        }\n      }, 1000);\n    },\n    resetState() {\n      this.paymentUrl = '';\n      this.qrCodeDataUrl = '';\n      this.error = '';\n      this.copySuccess = false;\n      if (this.timer) {\n        clearInterval(this.timer);\n        this.timer = null;\n      }\n    },\n    copyLink() {\n      if (!this.paymentUrl) return;\n      this.$refs.paymentLinkInput.select();\n      document.execCommand('copy');\n      this.copySuccess = true;\n      setTimeout(() => {\n        this.copySuccess = false;\n      }, 2000);\n    }\n  },\n  beforeDestroy() {\n    if (this.timer) {\n      clearInterval(this.timer);\n    }\n  }\n};\n</script>\n\n<style scoped>\n/* 基础样式 */\n.sdk-to-direct-pay {\n  padding: 0 1rem;\n}\n\n.page-header {\n  margin-bottom: 1.5rem;\n  padding-bottom: 1rem;\n  border-bottom: 1px solid #F1F5F9;\n}\n\n.page-title {\n  font-size: 1.75rem;\n  font-weight: 700;\n  color: #1F2937;\n  margin: 0 0 0.25rem 0;\n}\n\n.page-subtitle {\n  font-size: 1rem;\n  color: #6B7280;\n  margin: 0;\n}\n\n/* 新的两栏布局 */\n.page-layout {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1.5rem;\n}\n\n/* 面板通用样式 */\n.input-panel, .result-panel {\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n  border: 1px solid #F1F5F9;\n  overflow: hidden;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.panel-header {\n  background: #F9FAFB;\n  padding: 1rem 1.5rem;\n  border-bottom: 1px solid #F1F5F9;\n  display: flex;\n  align-items: center;\n}\n\n.panel-header i {\n  color: #4F46E5;\n  font-size: 1.25rem;\n  margin-right: 0.75rem;\n}\n\n.panel-header h2 {\n  font-size: 1.25rem;\n  font-weight: 600;\n  color: #374151;\n  margin: 0;\n}\n\n.panel-body {\n  padding: 1.5rem;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n/* 输入面板样式 */\n.input-panel textarea {\n  width: 100%;\n  flex: 1;\n  min-height: 200px;\n  padding: 1rem;\n  box-sizing: border-box;\n  border-radius: 8px;\n  border: 1px solid #D1D5DB;\n  font-size: 0.9rem;\n  line-height: 1.5;\n  transition: border-color 0.3s, box-shadow 0.3s;\n  resize: none;\n  margin-bottom: 1rem;\n}\n\n.input-panel textarea:focus {\n  border-color: #4F46E5;\n  box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);\n  outline: none;\n}\n\n.action-row {\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n}\n\n.sample-btn {\n  padding: 0.875rem 1rem;\n  background: #F3F4F6;\n  color: #4B5563;\n  border: 1px solid #D1D5DB;\n  border-radius: 8px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  flex-shrink: 0;\n}\n\n.sample-btn:hover:not(:disabled) {\n  background: #E5E7EB;\n  transform: translateY(-2px);\n}\n\n.sample-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.action-btn {\n  padding: 0.875rem 1.5rem;\n  background: #4F46E5;\n  color: white;\n  border: none;\n  border-radius: 8px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  flex: 1;\n}\n\n.action-btn:hover:not(:disabled) {\n  background: #4338CA;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(79, 70, 229, 0.2);\n}\n\n.action-btn:disabled {\n  background: #A5B4FC;\n  cursor: not-allowed;\n}\n\n/* 结果面板样式 */\n.result-panel .panel-body {\n  position: relative;\n  min-height: 300px;\n}\n\n/* 状态容器 */\n.state-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  border-radius: 8px;\n  text-align: center;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n.spinner {\n  width: 36px;\n  height: 36px;\n  border: 3px solid #E5E7EB;\n  border-top: 3px solid #4F46E5;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin-bottom: 1rem;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.loading-state p {\n  color: #6B7280;\n}\n\n.error-state {\n  background: #FEF2F2;\n  color: #EF4444;\n}\n\n.error-state .fa-exclamation-circle {\n  font-size: 2rem;\n  margin-bottom: 0.75rem;\n}\n\n/* 空状态 */\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: #9CA3AF;\n  text-align: center;\n}\n\n.empty-state i {\n  font-size: 2rem;\n  margin-bottom: 1rem;\n}\n\n/* 支付结果样式 */\n.payment-result {\n  width: 100%;\n}\n\n.result-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1.5rem;\n}\n\n.status-badge {\n  display: inline-flex;\n  align-items: center;\n  padding: 0.5rem 1rem;\n  border-radius: 9999px;\n  font-weight: 600;\n  font-size: 0.875rem;\n}\n\n.status-badge.success {\n  background-color: #ECFDF5;\n  color: #10B981;\n}\n\n.status-badge i {\n  margin-right: 0.5rem;\n}\n\n.timer-badge {\n  display: inline-flex;\n  align-items: center;\n  padding: 0.5rem 1rem;\n  border-radius: 9999px;\n  background-color: #FEF2F2;\n  color: #EF4444;\n  font-weight: 600;\n  font-size: 0.875rem;\n  font-family: monospace;\n}\n\n.timer-badge i {\n  margin-right: 0.5rem;\n}\n\n/* 二维码区域 */\n.qr-section {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-bottom: 1.5rem;\n}\n\n.qr-wrapper {\n  padding: 10px;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 4px 15px rgba(0,0,0,0.05);\n  border: 1px solid #E5E7EB;\n  margin-bottom: 0.75rem;\n}\n\n.qr-wrapper img, .qr-placeholder {\n  display: block;\n  width: 200px;\n  height: 200px;\n}\n\n.qr-placeholder {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.qr-tip {\n  color: #4B5563;\n  font-size: 0.875rem;\n  margin: 0;\n}\n\n/* 链接区域 */\n.link-section {\n  margin-top: 1.5rem;\n}\n\n.link-section h4 {\n  font-size: 1rem;\n  font-weight: 600;\n  color: #374151;\n  margin: 0 0 0.75rem 0;\n}\n\n.input-group {\n  display: flex;\n  margin-bottom: 0.5rem;\n}\n\n.input-group input {\n  width: 100%;\n  padding: 0.625rem 0.75rem;\n  border: 1px solid #D1D5DB;\n  border-radius: 8px 0 0 8px;\n  background-color: #F9FAFB;\n  font-size: 0.875rem;\n  color: #4B5563;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.input-group .copy-btn {\n  padding: 0.625rem 1rem;\n  border: 1px solid #D1D5DB;\n  border-left: none;\n  border-radius: 0 8px 8px 0;\n  background-color: #F3F4F6;\n  cursor: pointer;\n  color: #6B7280;\n  transition: background-color 0.2s;\n}\n\n.copy-btn:hover {\n  background-color: #E5E7EB;\n}\n\n.copy-btn .fa-check {\n  color: #10B981;\n}\n\n.link-tip {\n  color: #6B7280;\n  font-size: 0.75rem;\n  margin: 0;\n}\n\n/* 动画 */\n.fade-enter-active, .fade-leave-active {\n  transition: opacity 0.4s ease;\n}\n\n.fade-enter, .fade-leave-to {\n  opacity: 0;\n}\n\n/* 响应式布局 */\n@media (max-width: 768px) {\n  .page-layout {\n    grid-template-columns: 1fr;\n  }\n  \n  .input-panel textarea {\n    min-height: 150px;\n  }\n  \n  .panel-header {\n    padding: 0.75rem 1rem;\n  }\n  \n  .panel-header h2 {\n    font-size: 1.1rem;\n  }\n  \n  .panel-body {\n    padding: 1rem;\n  }\n  \n  .qr-wrapper img, .qr-placeholder {\n    width: 180px;\n    height: 180px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SdkToDirectPay.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SdkToDirectPay.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./SdkToDirectPay.vue?vue&type=template&id=129b7362&scoped=true\"\nimport script from \"./SdkToDirectPay.vue?vue&type=script&lang=js\"\nexport * from \"./SdkToDirectPay.vue?vue&type=script&lang=js\"\nimport style0 from \"./SdkToDirectPay.vue?vue&type=style&index=0&id=129b7362&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"129b7362\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}